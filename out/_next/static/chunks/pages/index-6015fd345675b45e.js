(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8581:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9701)}])},9701:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return mn}});var r=n(5893),a=n(7294),i=n(1120),o=n(4973),s=n(1574),c=n(1163),l=n(5697),u=n.n(l),d=n(4051),p=n.n(d),f=n(8523),h=function(e,t){if(0==e)return"0 Bytes";var n=t||2,r=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,r)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r]},x=n(9100);function m(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,a)}var y=n(6869),b=function(){var e,t=(e=p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.ready;case 2:return n=(t=y).to_base64(t.randombytes_buf(16),t.base64_variants.URLSAFE_NO_PADDING),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){m(i,r,a,o,s,"next",e)}function s(e){m(i,r,a,o,s,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();function g(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,a)}var v=n(6869),j=function(){var e,t=(e=p().mark((function e(t){var n,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.ready;case 2:return r=(n=v).crypto_scalarmult_base(n.from_base64(t)),e.abrupt("return",n.to_base64(r));case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){g(i,r,a,o,s,"next",e)}function s(e){g(i,r,a,o,s,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),_=n(1322),k=n.n(_),Z=n(9731),w=3600,F=86400,S=31*F,C=32140800,I={0:(0,Z.F)("very_weak"),1:(0,Z.F)("weak"),2:(0,Z.F)("moderate"),3:(0,Z.F)("good"),4:(0,Z.F)("strong")},P=function(e){var t=k()(e),n=t.score,r=function(e){var t;return(e<1?[null,"".concat((0,Z.F)("less_second"))]:e<60?[t=Math.round(e),t+" ".concat((0,Z.F)("seconds"))]:e<w?[t=Math.round(e/60),t+" ".concat((0,Z.F)("minutes"))]:e<F?[t=Math.round(e/w),t+" ".concat((0,Z.F)("hours"))]:e<S?[t=Math.round(e/F),t+" ".concat((0,Z.F)("days"))]:e<C?[t=Math.round(e/S),t+" ".concat((0,Z.F)("months"))]:e<321408e4?[t=Math.round(e/C),t+" ".concat((0,Z.F)("years"))]:[null,(0,Z.F)("centuries")])[1]}(t.crack_times_seconds.offline_slow_hashing_1e4_per_second);return[I[n],r]},T=n(819),B=n(5046),K=n(7155),N=n(1749),A=n(5357),R=n(1594),O=n(2876),E=n(9905),W=n(282),z=n(9895),M=n(2318),D=n(7078),L=n(5477),q=n(2692),H=n(2267),U=n(7812),G=n(5685),Y=n(7083),$=n(2340),V=n(7661),J=n(553),X=n(4436),Q=n(3950),ee=n(7726),te=n(7239),ne=n(6210),re=n(7879),ae=n(3099),ie=n(67),oe=n(8270),se=n(6081),ce=n(6037),le=n(366),ue=n(3957),de=n(4779),pe=n(2822),fe=n(998),he=n(5757),xe=n(1860),me=n(8428);function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function be(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,a)}function ge(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){be(i,r,a,o,s,"next",e)}function s(e){be(i,r,a,o,s,"throw",e)}o(void 0)}))}}function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ve(e,t,n[t])}))}return e}function _e(e){return function(e){if(Array.isArray(e))return ye(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ye(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ke,Ze,we,Fe,Se,Ce,Ie=(0,i.Z)((function(e){return{root:{width:"100%"},offline:{fontSize:12,float:"right",color:e.palette.diamondBlack.main},stepper:{color:e.palette.mineShaft.main,backgroundColor:"transparent"},stepIcon:{"&$activeStepIcon":{color:e.palette.emperor.main},"&$completedStepIcon":{color:e.palette.emperor.main}},activeStepIcon:{},completedStepIcon:{},button:ve({marginTop:e.spacing(1),marginRight:e.spacing(1),borderRadius:"8px",border:"none",color:e.palette.mineShaft.main,backgroundColor:e.palette.mercury.light,"&:hover":{backgroundColor:e.palette.mercury.main},transition:"background-color 0.2s ease-out"},"transition","color .01s"),browseButton:ve({padding:8,paddingLeft:15,paddingRight:15,textTransform:"none",borderRadius:"8px",border:"none",color:e.palette.mineShaft.main,backgroundColor:e.palette.alto.light,"&:hover":{backgroundColor:e.palette.alto.main},transition:"background-color 0.2s ease-out"},"transition","color .01s"),resetButton:ve({marginLeft:8,padding:8,paddingLeft:15,paddingRight:15,textTransform:"none",borderRadius:"8px",border:"none",color:e.palette.flower.text,backgroundColor:e.palette.flower.main,"&:hover":{backgroundColor:e.palette.flower.light},transition:"background-color 0.2s ease-out"},"transition","color .01s"),backButton:{marginTop:e.spacing(1),marginRight:e.spacing(1),borderRadius:"8px",backgroundColor:e.palette.mercury.main,transition:"color .01s"},nextButton:{marginTop:e.spacing(1),marginRight:e.spacing(1),borderRadius:"8px",backgroundColor:e.palette.primary.main,color:e.palette.white.main,"&:hover":{backgroundColor:e.palette.mineShaft.main},transition:"color .01s"},actionsContainer:{marginBottom:e.spacing(2)},resetContainer:{padding:e.spacing(3),boxShadow:"rgba(149, 157, 165, 0.4) 0px 8px 24px",borderRadius:"8px"},input:{display:"none"},fileArea:{padding:"20px",border:"5px dashed",borderColor:e.palette.gallery.main,borderRadius:"14px",marginBottom:"10px",alignItems:"center",justifyContent:"center",flexDirection:"column"},filesInfo:ve({float:"right",marginTop:15,textTransform:"none",color:e.palette.cottonBoll.text,transition:"background-color 0.2s ease-out"},"transition","color .01s"),filesPaper:{marginBottom:15,overflow:"auto",maxHeight:"280px",backgroundColor:"transparent"},filesList:{display:"flex",flex:"1",flexWrap:"wrap",alignContent:"center",justifyContent:"center"},filesListItem:{backgroundColor:"#f3f3f3",borderRadius:"8px",padding:15},filesListItemText:{width:"100px",maxWidth:"150px",minHeight:"50px",maxHeight:"50px"}}})),Pe=[],Te=0,Be="secretKey";function Ke(){var e=Ie(),t=(0,c.useRouter)(),n=t.query,i=(0,a.useState)(0),o=i[0],s=i[1],l=(0,a.useState)([]),u=l[0],d=l[1],m=(0,a.useState)(0),y=m[0],g=m[1],v=(0,a.useState)(0),_=v[0],k=v[1],w=(0,a.useState)(),F=w[0],S=w[1],C=(0,a.useState)(!1),I=C[0],ye=C[1],be=(0,a.useState)(),ve=be[0],Ke=be[1],Ne=(0,a.useState)(),Ae=Ne[0],Re=Ne[1],Oe=(0,a.useState)(!1),Ee=Oe[0],We=Oe[1],ze=(0,a.useState)(!1),Me=ze[0],De=ze[1],Le=(0,a.useState)(!1),qe=Le[0],He=Le[1],Ue=(0,a.useState)(!1),Ge=Ue[0],Ye=Ue[1],$e=(0,a.useState)(),Ve=$e[0],Je=$e[1],Xe=(0,a.useState)(!1),Qe=Xe[0],et=Xe[1],tt=(0,a.useState)("secretKey"),nt=tt[0],rt=tt[1],at=(0,a.useState)(!1),it=at[0],ot=at[1],st=(0,a.useState)(),ct=st[0],lt=st[1],ut=(0,a.useState)(!1),dt=ut[0],pt=ut[1],ft=(0,a.useState)(),ht=ft[0],xt=ft[1],mt=(0,a.useState)(!1),yt=mt[0],bt=mt[1],gt=(0,f.uI)({onDrop:function(e){It(e)},noClick:!0,noKeyboard:!0,disabled:0!==o}),vt=gt.getRootProps,jt=gt.getInputProps,_t=gt.isDragActive,kt=function(){s((function(e){return e+1}))},Zt=function(){s((function(e){return e-1})),De(!1),He(!1),Ye(!1),et(!1)},wt=function(e){rt(e),Be=e},Ft=function(){pt(!dt)},St=function(){g(Te=0)},Ct=function(){var e=ge(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:t=e.sent,Ze=t,S(t),et(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),It=function(e){e=Array.from(e),Pe=Pe.length>0?(Pe=Pe.concat(e)).filter((function(e,t,n){return t===n.findIndex((function(t){return t.name===e.name&&t.size===e.size}))})):e,d(Pe),Pt()},Pt=function(){if(Pe){var e=Pe.reduce((function(e,t){return e+t.size}),0);k(e)}},Tt=function(){var e=ge(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Fe=u.length,Bt();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Bt=function(){var e=encodeURIComponent(Pe[Te].name+".enc");navigator.serviceWorker.ready.then((function(t){t.active.postMessage({cmd:"prepareFileNameEnc",fileName:e})}))},Kt=function(){var e=ge(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Te<=Fe-1&&(ke=Pe[Te],window.open("file","_self"),ot(!0),"publicKey"===Be&&navigator.serviceWorker.ready.then((function(e){e.active.postMessage({cmd:"requestEncKeyPair",privateKey:Se,publicKey:Ce,mode:"derive"})})),"secretKey"===Be&&navigator.serviceWorker.ready.then((function(e){e.active.postMessage({cmd:"requestEncryption",password:Ze})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Nt=function(e){navigator.serviceWorker.ready.then((function(t){ke.slice(0,T.kr).arrayBuffer().then((function(n){we=T.kr,"secretKey"===e&&t.active.postMessage({cmd:"encryptFirstChunk",chunk:n,last:we>=ke.size},[n]),"publicKey"===e&&t.active.postMessage({cmd:"asymmetricEncryptFirstChunk",chunk:n,last:we>=ke.size},[n])}))}))},At=function(){var e=ge(p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(Ae);case 2:t=e.sent,n=window.location.origin+"/?tab=decryption&publicKey="+t,lt(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){var e=setInterval((function(){navigator.serviceWorker.ready.then((function(e){e.active.postMessage({cmd:"pingSW"})}))}),15e3);return function(){return clearInterval(e)}}),[]),(0,a.useEffect)((function(){"encryption"===n.tab&&n.publicKey&&(Ke(n.publicKey),Ce=n.publicKey,bt(!0),rt("publicKey"),Be="publicKey")}),[n.publicKey,n.tab]),(0,a.useEffect)((function(){navigator.serviceWorker.addEventListener("message",(function(e){switch(e.data.reply){case"goodKeyPair":s(2);break;case"wrongPrivateKey":He(!0);break;case"wrongPublicKey":De(!0);break;case"wrongKeyPair":Ye(!0),Je((0,Z.F)("invalid_key_pair"));break;case"wrongKeyInput":Ye(!0),Je((0,Z.F)("invalid_keys_input"));break;case"keysGenerated":Nt("secretKey");break;case"keyPairReady":Nt("publicKey");break;case"filePreparedEnc":Kt();break;case"continueEncryption":!function(e){navigator.serviceWorker.ready.then((function(t){ke.slice(we,we+T.kr).arrayBuffer().then((function(t){we+=T.kr,e.source.postMessage({cmd:"encryptRestOfChunks",chunk:t,last:we>=ke.size},[t])}))}))}(e);break;case"encryptionFinished":Fe>1?(g(Te+=1),ke=null,we=null,Te<=Fe-1?setTimeout((function(){Bt()}),1e3):(ot(!1),kt())):(ot(!1),kt())}}))}),[]),(0,r.jsxs)("div",je({className:e.root},vt(),{children:[(0,r.jsx)(Q.Z,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:dt,autoHideDuration:2e3,onClose:Ft,children:(0,r.jsx)(B.Z,{severity:"success",children:ht})}),(0,r.jsx)(q.Z,{open:_t,style:{zIndex:10},children:(0,r.jsxs)(M.Z,{variant:"h2",gutterBottom:!0,style:{color:"#fff",textAlign:"center"},children:[(0,r.jsx)("img",{src:"/assets/images/logo2.png",width:"100",height:"100",alt:"hat.sh logo"}),(0,r.jsx)("br",{}),(0,Z.F)("drop_file_enc")]})}),(0,r.jsx)(ce.Z,{in:yt,style:{marginTop:5},children:(0,r.jsx)(B.Z,{severity:"success",action:(0,r.jsx)(U.Z,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){bt(!1)},children:(0,r.jsx)(le.Z,{fontSize:"inherit"})}),children:(0,Z.F)("recipient_key_loaded")})}),(0,r.jsxs)(A.Z,{activeStep:o,orientation:"vertical",className:e.stepper,children:[(0,r.jsxs)(R.Z,{children:[(0,r.jsx)(O.Z,{StepIconProps:{classes:{root:e.stepIcon,active:e.activeStepIcon,completed:e.completedStepIcon}},children:(0,Z.F)("choose_files_enc")}),(0,r.jsxs)(E.Z,{children:[(0,r.jsx)("div",{className:"wrapper p-3",id:"encFileWrapper",children:(0,r.jsxs)("div",{className:e.fileArea,id:"encFileArea",style:{display:u.length>0?"":"flex"},children:[(0,r.jsx)(z.Z,{elevation:0,className:e.filesPaper,children:(0,r.jsx)(pe.Z,{dense:!0,className:e.filesList,children:u.length>0?u.map((function(t,n){return(0,r.jsxs)(fe.Z,{className:e.filesListItem,children:[(0,r.jsx)(he.Z,{className:e.filesListItemText,primary:t.name,secondary:h(t.size)}),(0,r.jsx)(xe.Z,{children:(0,r.jsx)(U.Z,{style:{marginTop:40},onClick:function(){return e=n,Pe=_e(Pe.slice(0,e)).concat(_e(Pe.slice(e+1))),d(Pe),void Pt();var e},edge:"end","aria-label":"delete",children:(0,r.jsx)(me.Z,{})})})]},n)})):(0,Z.F)("drag_drop_files")})}),(0,r.jsx)("input",je({},jt(),{className:e.input,id:"enc-file",type:"file",onChange:function(e){return It(e.target.files)},multiple:!0})),(0,r.jsx)("label",{htmlFor:"enc-file",children:(0,r.jsx)(W.Z,{className:e.browseButton,component:"span",startIcon:u.length>0?(0,r.jsx)(ue.Z,{}):(0,r.jsx)(re.Z,{}),children:u.length>0?(0,Z.F)("add_files"):(0,Z.F)("browse_files")})}),u.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(W.Z,{onClick:function(){return d(Pe=[]),void k(0)},className:e.resetButton,component:"span",startIcon:(0,r.jsx)(de.Z,{}),children:(0,Z.F)("reset")}),(0,r.jsxs)("small",{className:e.filesInfo,children:[u.length," ",u.length>1?(0,Z.F)("files"):(0,Z.F)("file"),u.length>1&&(0,r.jsxs)(r.Fragment,{children:[", ",h(_)]})]})]})]})}),(0,r.jsx)("div",{className:e.actionsContainer,children:(0,r.jsx)("div",{children:(0,r.jsx)(W.Z,{fullWidth:!0,disabled:0===u.length,variant:"contained",onClick:kt,className:"".concat(e.nextButton," nextBtnHs submitFile"),children:(0,Z.F)("next")})})}),(0,r.jsx)(M.Z,{className:e.offline,children:(0,Z.F)("offline_note")})]})]},1),(0,r.jsxs)(R.Z,{children:[(0,r.jsx)(O.Z,{StepIconProps:{classes:{root:e.stepIcon,active:e.activeStepIcon,completed:e.completedStepIcon}},children:"secretKey"===nt?(0,Z.F)("enter_password_enc"):(0,Z.F)("enter_keys_enc")}),(0,r.jsxs)(E.Z,{children:[(0,r.jsx)(X.Z,{component:"fieldset",style:{float:"right",marginBottom:"15px"},children:(0,r.jsxs)(V.Z,{row:!0,value:nt,"aria-label":"encryption options",children:[(0,r.jsx)(J.Z,{value:"secretKey",control:(0,r.jsx)($.Z,{color:"default"}),label:(0,Z.F)("password"),labelPlacement:"end",onChange:function(){return wt("secretKey")}}),(0,r.jsx)(J.Z,{value:"publicKey",className:"publicKeyInput",control:(0,r.jsx)($.Z,{color:"default"}),label:(0,Z.F)("public_key"),labelPlacement:"end",onChange:function(){return wt("publicKey")}})]})}),"secretKey"===nt&&(0,r.jsx)(D.Z,{required:!0,error:!!Qe,type:I?"text":"password",id:"encPasswordInput",label:(0,Z.F)("required"),placeholder:(0,Z.F)("password"),helperText:F?(0,r.jsx)(Y.ZP,{title:"".concat((0,Z.F)("crackTimeEstimation")," ").concat(P(F)[1]),placement:"right",arrow:!0,children:(0,r.jsxs)("span",{children:[(0,Z.F)("password_strength"),": ",(0,r.jsx)("strong",{children:P(F)[0]})]})}):(0,Z.F)("choose_strong_password"),variant:"outlined",value:F||"",onChange:function(e){return t=e.target.value,Ze=t,void S(t);var t},fullWidth:!0,InputProps:{endAdornment:(0,r.jsxs)(r.Fragment,{children:[F&&(0,r.jsx)(Y.ZP,{title:(0,Z.F)("show_password"),placement:"left",children:(0,r.jsx)(U.Z,{onClick:function(){return ye(!I)},children:I?(0,r.jsx)(ie.Z,{}):(0,r.jsx)(oe.Z,{})})}),(0,r.jsx)(Y.ZP,{title:(0,Z.F)("generate_password"),placement:"left",children:(0,r.jsx)(U.Z,{onClick:Ct,className:"generatePasswordBtn",children:(0,r.jsx)(G.Z,{})})})]})}}),"publicKey"===nt&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(D.Z,{id:"public-key-input",required:!0,error:!!Me,label:Me?(0,Z.F)("error"):(0,Z.F)("recipient_public_key"),helperText:Me?(0,Z.F)("wrong_public_key"):"",placeholder:(0,Z.F)("enter_recipient_public_key"),variant:"outlined",value:ve||"",onChange:function(e){return t=e.target.value,Ke(t),Ce=t,void De(!1);var t},fullWidth:!0,style:{marginBottom:"15px"},InputProps:{endAdornment:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{accept:".public",className:e.input,id:"public-key-file",type:"file",onChange:function(e){return function(e){if(e&&e.size<=1e6){var t=new FileReader;t.readAsText(e),t.onload=function(){Ke(t.result),Ce=t.result},De(!1)}}(e.target.files[0])}}),(0,r.jsx)("label",{htmlFor:"public-key-file",children:(0,r.jsx)(Y.ZP,{title:(0,Z.F)("load_public_key"),placement:"left",children:(0,r.jsx)(U.Z,{"aria-label":(0,Z.F)("load_public_key"),component:"span",children:(0,r.jsx)(ee.Z,{})})})})]})}}),(0,r.jsx)(D.Z,{id:"private-key-input",type:Ee?"text":"password",required:!0,error:!!qe,label:qe?(0,Z.F)("error"):(0,Z.F)("your_private_key_enc"),helperText:qe?(0,Z.F)("wrong_private_key"):"",placeholder:(0,Z.F)("enter_private_key_enc"),variant:"outlined",value:Ae||"",onChange:function(e){return t=e.target.value,Re(t),Se=t,void He(!1);var t},fullWidth:!0,style:{marginBottom:"15px"},InputProps:{endAdornment:(0,r.jsxs)(r.Fragment,{children:[Ae&&(0,r.jsx)(Y.ZP,{title:(0,Z.F)("show_private_key"),placement:"left",children:(0,r.jsx)(U.Z,{onClick:function(){return We(!Ee)},children:Ee?(0,r.jsx)(ie.Z,{}):(0,r.jsx)(oe.Z,{})})}),(0,r.jsx)("input",{accept:".private",className:e.input,id:"private-key-file",type:"file",onChange:function(e){return function(e){if(e&&e.size<=1e6){var t=new FileReader;t.readAsText(e),t.onload=function(){Re(t.result),Se=t.result},He(!1)}}(e.target.files[0])}}),(0,r.jsx)("label",{htmlFor:"private-key-file",children:(0,r.jsx)(Y.ZP,{title:(0,Z.F)("load_private_key"),placement:"left",children:(0,r.jsx)(U.Z,{"aria-label":(0,Z.F)("load_private_key"),component:"span",children:(0,r.jsx)(ee.Z,{})})})})]})}}),(0,r.jsx)(x.Z,{})]}),(0,r.jsx)("div",{className:e.actionsContainer,style:{marginTop:15},children:(0,r.jsxs)("div",{children:[(0,r.jsxs)(N.Z,{container:!0,spacing:1,children:[(0,r.jsx)(N.Z,{item:!0,children:(0,r.jsx)(W.Z,{disabled:0===o,onClick:Zt,className:e.backButton,fullWidth:!0,children:(0,Z.F)("back")})}),(0,r.jsx)(N.Z,{item:!0,xs:!0,children:(0,r.jsx)(W.Z,{disabled:"secretKey"===nt&&!F||"publicKey"===nt&&(!ve||!Ae),variant:"contained",onClick:function(){"secretKey"===Be&&(F.length>=12?s(2):et(!0)),"publicKey"===Be&&navigator.serviceWorker.ready.then((function(e){e.active.postMessage({cmd:"requestEncKeyPair",privateKey:Se,publicKey:Ce,mode:"test"})}))},className:"".concat(e.nextButton," nextBtnHs submitKeys"),fullWidth:!0,children:(0,Z.F)("next")})})]}),(0,r.jsx)("br",{}),"publicKey"===nt&&Ge&&(0,r.jsx)(B.Z,{severity:"error",children:Ve}),"secretKey"===nt&&Qe&&(0,r.jsx)(B.Z,{severity:"error",children:(0,Z.F)("short_password")})]})})]})]},2),(0,r.jsxs)(R.Z,{children:[(0,r.jsx)(O.Z,{StepIconProps:{classes:{root:e.stepIcon,active:e.activeStepIcon,completed:e.completedStepIcon}},children:(0,Z.F)("download_encrypted_files")}),(0,r.jsxs)(E.Z,{children:[u.length>0&&(0,r.jsxs)(B.Z,{severity:"success",icon:(0,r.jsx)(H.Z,{}),children:[(0,r.jsx)("strong",{children:u.length>1?u.length:u[0].name})," ",u.length>1?(0,Z.F)("files_ready_to_download"):(0,Z.F)("ready_to_download")]}),(0,r.jsxs)("div",{className:e.actionsContainer,children:[(0,r.jsxs)(N.Z,{container:!0,spacing:1,children:[(0,r.jsx)(N.Z,{item:!0,children:(0,r.jsx)(W.Z,{disabled:0===o||it,onClick:Zt,className:e.backButton,children:(0,Z.F)("back")})}),(0,r.jsx)(N.Z,{item:!0,xs:!0,children:(0,r.jsx)(W.Z,{disabled:it||!F&&!ve&&!Ae||0===u.length,variant:"contained",className:"".concat(e.nextButton," nextBtnHs"),startIcon:it?(0,r.jsx)(L.Z,{size:24,className:e.buttonProgress}):(0,r.jsx)(ae.Z,{}),fullWidth:!0,children:(0,r.jsx)("a",{onClick:function(e){return Tt(e)},className:"downloadFile",style:{width:"100%",textDecoration:"none"},children:it?"".concat(y+1,"/").concat(Fe," ").concat((0,Z.F)("downloading_file")):(0,Z.F)("encrypted_files")})})})]}),(0,r.jsx)("br",{}),it&&(0,r.jsx)(B.Z,{variant:"outlined",severity:"info",children:(0,Z.F)("page_close_alert")})]})]})]},3)]}),3===o&&(0,r.jsxs)(z.Z,{elevation:0,className:e.resetContainer,children:[(0,r.jsxs)(B.Z,{variant:"outlined",severity:"success",style:{border:"none"},children:[(0,r.jsx)(K.Z,{children:(0,Z.F)("success")}),(0,Z.F)("success_downloaded_files_enc"),"publicKey"===nt&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:(0,Z.F)("after_enc_note_one")}),(0,r.jsx)("li",{children:(0,Z.F)("after_enc_note_two")})]})]})]}),(0,r.jsxs)(N.Z,{container:!0,spacing:1,children:["secretKey"===nt&&(0,r.jsx)(N.Z,{item:!0,xs:12,sm:6,children:(0,r.jsx)(W.Z,{onClick:function(){navigator.clipboard.writeText(F),xt((0,Z.F)("password_copied")),Ft()},className:"".concat(e.button," copyPassword"),variant:"outlined",startIcon:(0,r.jsx)(te.Z,{}),fullWidth:!0,style:{textTransform:"none"},children:(0,Z.F)("copy_password")})}),"publicKey"===nt&&(0,r.jsx)(N.Z,{item:!0,xs:12,sm:6,children:(0,r.jsx)(Y.ZP,{title:(0,Z.F)("create_shareable_link_tooltip"),placement:"bottom",children:(0,r.jsx)(W.Z,{onClick:function(){return At()},className:e.button,variant:"outlined",startIcon:(0,r.jsx)(se.Z,{}),fullWidth:!0,style:{textTransform:"none"},children:(0,Z.F)("create_shareable_link")})})}),(0,r.jsx)(N.Z,{item:!0,xs:12,sm:6,children:(0,r.jsx)(W.Z,{onClick:function(){s(0),d([]),S(),Ke(),Re(),Se=null,Ce=null,De(!1),He(!1),Ye(!1),et(!1),ot(!1),lt(),xt(),bt(!1),k(0),ke=null,Pe=[],Fe=0,St(),we=null,t.replace(t.pathname)},className:e.button,variant:"outlined",startIcon:(0,r.jsx)(ne.Z,{}),fullWidth:!0,style:{textTransform:"none"},children:(0,Z.F)("encrypt_more_files")})}),"publicKey"===nt&&ct&&(0,r.jsx)(D.Z,{style:{marginTop:15},defaultValue:ct,InputProps:{readOnly:!0,classes:{root:e.textFieldRoot,focused:e.textFieldFocused,notchedOutline:e.textFieldNotchedOutline},endAdornment:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(Y.ZP,{title:(0,Z.F)("copy_link"),placement:"left",children:(0,r.jsx)(U.Z,{onClick:function(){navigator.clipboard.writeText(ct),xt((0,Z.F)("create_shareable_link_copied")),Ft()},children:(0,r.jsx)(te.Z,{})})})})},helperText:(0,Z.F)("create_shareable_link_note"),variant:"outlined",fullWidth:!0})]})]})]}))}var Ne=function(e){return e.replace(".enc","").replace(/ *\([^)]*\) */g,"")},Ae=n(7315);function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Oe(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,a)}function Ee(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Oe(i,r,a,o,s,"next",e)}function s(e){Oe(i,r,a,o,s,"throw",e)}o(void 0)}))}}function We(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){We(e,t,n[t])}))}return e}function Me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(c){s=!0,a=c}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||Le(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(e){return function(e){if(Array.isArray(e))return Re(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Le(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){if(e){if("string"===typeof e)return Re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Re(e,t):void 0}}var qe,He,Ue,Ge,Ye,$e,Ve,Je,Xe=(0,i.Z)((function(e){return{root:{width:"100%"},offline:{fontSize:12,float:"right",color:e.palette.diamondBlack.main},stepper:{backgroundColor:"transparent"},stepIcon:{"&$activeStepIcon":{color:e.palette.emperor.main},"&$completedStepIcon":{color:e.palette.emperor.main}},activeStepIcon:{},completedStepIcon:{},button:{marginTop:e.spacing(1),marginRight:e.spacing(1),borderRadius:"8px",border:"none",color:e.palette.mineShaft.main,backgroundColor:e.palette.mercury.light,"&:hover":{backgroundColor:e.palette.mercury.main},transition:"background-color 0.2s ease-out"},browseButton:We({padding:8,paddingLeft:15,paddingRight:15,textTransform:"none",borderRadius:"8px",border:"none",color:e.palette.mineShaft.main,backgroundColor:e.palette.alto.light,"&:hover":{backgroundColor:e.palette.alto.main},transition:"background-color 0.2s ease-out"},"transition","color .01s"),resetButton:We({marginLeft:8,padding:8,paddingLeft:15,paddingRight:15,textTransform:"none",borderRadius:"8px",border:"none",color:e.palette.flower.text,backgroundColor:e.palette.flower.main,"&:hover":{backgroundColor:e.palette.flower.light},transition:"background-color 0.2s ease-out"},"transition","color .01s"),backButton:{marginTop:e.spacing(1),marginRight:e.spacing(1),borderRadius:"8px",backgroundColor:e.palette.mercury.main},nextButton:{marginTop:e.spacing(1),marginRight:e.spacing(1),borderRadius:"8px",backgroundColor:e.palette.primary.main,color:e.palette.white.main,"&:hover":{backgroundColor:e.palette.mineShaft.main},transition:"color .01s"},actionsContainer:{marginBottom:e.spacing(2)},resetContainer:{padding:e.spacing(3),boxShadow:"rgba(149, 157, 165, 0.4) 0px 8px 24px",borderRadius:"8px"},input:{display:"none"},fileArea:{padding:"20px",border:"5px dashed",borderColor:e.palette.gallery.main,borderRadius:"14px",alignItems:"center",justifyContent:"center",flexDirection:"column",marginBottom:"10px"},filesInfo:We({float:"right",marginTop:15,textTransform:"none",color:e.palette.cottonBoll.text,transition:"background-color 0.2s ease-out"},"transition","color .01s"),filesPaper:{marginBottom:15,overflow:"auto",maxHeight:"280px",backgroundColor:"transparent"},filesList:{display:"flex",flex:"1",flexWrap:"wrap",alignContent:"center",justifyContent:"center"},filesListItem:{backgroundColor:"#f3f3f3",borderRadius:"8px",padding:15},filesListItemText:{width:"100px",maxWidth:"150px",minHeight:"50px",maxHeight:"50px"}}})),Qe=[],et=0;function tt(){var e=Xe(),t=(0,c.useRouter)(),n=t.query,i=(0,a.useState)(0),o=i[0],s=i[1],l=(0,a.useState)([]),u=l[0],d=l[1],x=(0,a.useState)(0),m=x[0],y=x[1],b=(0,a.useState)(),g=b[0],v=b[1],j=(0,a.useState)("secretKey"),_=j[0],k=j[1],w=(0,a.useState)(),F=w[0],S=w[1],C=(0,a.useState)(),I=C[0],P=C[1],H=(0,a.useState)(!1),G=H[0],$=H[1],V=(0,a.useState)(!1),J=V[0],X=V[1],Q=(0,a.useState)(!1),te=Q[0],se=Q[1],ye=(0,a.useState)(!1),be=ye[0],ge=ye[1],ve=(0,a.useState)(),je=ve[0],_e=ve[1],ke=(0,a.useState)(),Ze=ke[0],we=ke[1],Fe=(0,a.useState)(),Se=Fe[0],Ce=Fe[1],Ie=(0,a.useState)(!1),Pe=Ie[0],Te=Ie[1],Be=(0,a.useState)(!1),Ke=Be[0],Re=Be[1],Oe=(0,a.useState)(!1),We=Oe[0],Le=Oe[1],tt=(0,a.useState)(!1),nt=tt[0],rt=tt[1],at=(0,a.useState)(!1),it=at[0],ot=at[1],st=(0,a.useState)(!1),ct=st[0],lt=st[1],ut=(0,a.useState)(!1),dt=ut[0],pt=ut[1],ft=(0,a.useState)(!1),ht=ft[0],xt=ft[1],mt=(0,f.uI)({onDrop:function(e){wt(e)},noClick:!0,noKeyboard:!0,disabled:0!==o}),yt=mt.getRootProps,bt=mt.getInputProps,gt=mt.isDragActive,vt=function(){s((function(e){return e+1}))},jt=function(){s((function(e){return e-1})),Re(!1),X(!1),se(!1),ge(!1),ot(!1),rt(!1)},_t=function(){y(et=0)},kt=function(){y(et+=1)},Zt=function(){we(!1),Ce(!1),Te(!1),_t(),$e=null},wt=function(e){e=Array.from(e),Qe=Qe.length>0?(Qe=Qe.concat(e)).filter((function(e,t,n){return t===n.findIndex((function(t){return t.name===e.name&&t.size===e.size}))})):e,d(Qe),Zt()},Ft=function(){var e;Ye=Qe.length,et<=Ye-1&&(e=Qe[et],navigator.serviceWorker.ready.then((function(t){Le(!0),we(!1),Ce(!1),Te(!1),Promise.all([e.slice(0,11).arrayBuffer(),e.slice(0,22).arrayBuffer()]).then((function(e){var n=Me(e,2),r=n[0],a=n[1];t.active.postMessage({cmd:"checkFile",signature:r,legacy:a})}))})))},St=function(){Ye>1&&(kt(),et<=Ye-1?Ft():(s(1),Le(!1),_t()))},Ct=function(){Te(!0),Le(!1)},It=function(){Ye=Qe.length,et<=Ye-1&&Pt(Qe[et])},Pt=function(e){"secretKey"===$e&&navigator.serviceWorker.ready.then((function(t){rt(!0),Re(!1),Promise.all([e.slice(0,11).arrayBuffer(),e.slice(11,27).arrayBuffer(),e.slice(27,51).arrayBuffer(),e.slice(51,51+T.kr+T.G0).arrayBuffer()]).then((function(e){var n=Me(e,4),r=n[0],a=n[1],i=n[2],o=n[3];Ue=o,t.active.postMessage({cmd:"requestTestDecryption",password:Ge,signature:r,salt:a,header:i,decFileBuff:Ue})}))})),"publicKey"===$e&&navigator.serviceWorker.ready.then((function(t){ot(!0),ge(!1),se(!1),X(!1);Promise.all([e.slice(11,35).arrayBuffer(),e.slice(35,35+T.kr+T.G0).arrayBuffer()]).then((function(e){var n=Me(e,2),r=n[0],a=n[1];Ue=a,t.active.postMessage({cmd:"requestDecKeyPair",privateKey:Ve,publicKey:Je,header:r,decFileBuff:Ue,mode:"test"})}))}))},Tt=function(){var e=Ee(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ye=u.length,Bt();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Bt=function(){var e=encodeURIComponent(Ne(Qe[et].name));navigator.serviceWorker.ready.then((function(t){t.active.postMessage({cmd:"prepareFileNameDec",fileName:e})}))},Kt=function(){var e=Ee(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:et<=Ye-1&&(qe=Qe[et],window.open("file","_self"),pt(!0),"secretKey"===$e&&navigator.serviceWorker.ready.then((function(e){Promise.all([qe.slice(0,11).arrayBuffer(),qe.slice(11,27).arrayBuffer(),qe.slice(27,51).arrayBuffer(),qe.slice(51,51+T.kr+T.G0).arrayBuffer()]).then((function(t){var n=Me(t,4),r=n[0],a=n[1],i=n[2];n[3];e.active.postMessage({cmd:"requestDecryption",password:Ge,signature:r,salt:a,header:i})}))})),"publicKey"===$e&&navigator.serviceWorker.ready.then((function(e){Promise.all([qe.slice(11,35).arrayBuffer(),qe.slice(35,35+T.kr+T.G0).arrayBuffer()]).then((function(t){var n=Me(t,2),r=n[0],a=n[1];Ue=a,e.active.postMessage({cmd:"requestDecKeyPair",privateKey:Ve,publicKey:Je,header:r,decFileBuff:Ue,mode:"derive"})}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Nt=function(e){var t;"secretKey"===e&&(t=51),"publicKey"===e&&(t=35),qe=Qe[et],navigator.serviceWorker.ready.then((function(e){qe.slice(t,t+T.kr+T.G0).arrayBuffer().then((function(n){He=t+T.kr+T.G0,e.active.postMessage({cmd:"decryptFirstChunk",chunk:n,last:He>=qe.size},[n])}))}))};return(0,a.useEffect)((function(){"decryption"===n.tab&&n.publicKey&&(S(n.publicKey),Je=n.publicKey,xt(!0),k("publicKey"),$e="publicKey")}),[n.publicKey,n.tab]),(0,a.useEffect)((function(){navigator.serviceWorker.addEventListener("message",(function(e){switch(e.data.reply){case"badFile":Ye>1?(we(Qe[et].name),Le(!1)):(we(!0),Le(!1));break;case"oldVersion":Ye>1?(Ce(Qe[et].name),Le(!1)):(Ce(!0),Le(!1));break;case"secretKeyEncryption":if(Ye>1){if($e&&"secretKey"!==$e)return void Ct();$e="secretKey",k("secretKey"),St()}else k("secretKey"),$e="secretKey",s(1),Le(!1),_t();break;case"publicKeyEncryption":if(Ye>1){if($e&&"publicKey"!==$e)return void Ct();$e="publicKey",k("publicKey"),St()}else k("publicKey"),$e="publicKey",s(1),Le(!1),_t();break;case"wrongDecPrivateKey":se(!0),ot(!1);break;case"wrongDecPublicKey":X(!0),ot(!1);break;case"wrongDecKeys":X(!0),se(!0),ot(!1);break;case"wrongDecKeyPair":ge(!0),_e((0,Z.F)("invalid_key_pair")),ot(!1);break;case"wrongDecKeyInput":ge(!0),_e((0,Z.F)("invalid_keys_input")),ot(!1);break;case"wrongPassword":Re(!0),rt(!1);break;case"filePreparedDec":Kt();break;case"readyToDecrypt":Ye>1?Ye>1&&(kt(),et<=Ye-1?It():(ot(!1),rt(!1),vt(),_t())):(ot(!1),rt(!1),vt(),_t());break;case"decKeyPairGenerated":Nt("publicKey");break;case"decKeysGenerated":Nt("secretKey");break;case"continueDecryption":!function(e){qe=Qe[et],navigator.serviceWorker.ready.then((function(t){qe.slice(He,He+T.kr+T.G0).arrayBuffer().then((function(t){He+=T.kr+T.G0,e.source.postMessage({cmd:"decryptRestOfChunks",chunk:t,last:He>=qe.size},[t])}))}))}(e);break;case"decryptionFinished":Ye>1?(kt(),qe=null,He=null,et<=Ye-1?setTimeout((function(){Bt()}),1e3):(pt(!1),vt())):(pt(!1),vt())}}))}),[]),(0,r.jsxs)("div",ze({className:e.root},yt(),{children:[(0,r.jsx)(q.Z,{open:gt,style:{zIndex:10},children:(0,r.jsxs)(M.Z,{variant:"h2",gutterBottom:!0,style:{color:"#fff",textAlign:"center"},children:[(0,r.jsx)("img",{src:"/assets/images/logo2.png",width:"100",height:"100",alt:"hat.sh logo"}),(0,r.jsx)("br",{}),(0,Z.F)("drop_file_dec")]})}),(0,r.jsx)(ce.Z,{in:ht,style:{marginTop:5},children:(0,r.jsx)(B.Z,{severity:"success",action:(0,r.jsx)(U.Z,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){xt(!1)},children:(0,r.jsx)(le.Z,{fontSize:"inherit"})}),children:(0,Z.F)("sender_key_loaded")})}),(0,r.jsxs)(A.Z,{activeStep:o,orientation:"vertical",className:e.stepper,children:[(0,r.jsxs)(R.Z,{children:[(0,r.jsx)(O.Z,{StepIconProps:{classes:{root:e.stepIcon,active:e.activeStepIcon,completed:e.completedStepIcon}},children:(0,Z.F)("choose_files_dec")}),(0,r.jsxs)(E.Z,{children:[(0,r.jsx)("div",{className:"wrapper p-3",id:"decFileWrapper",children:(0,r.jsxs)("div",{className:e.fileArea,id:"decFileArea",style:{display:u.length>0?"":"flex"},children:[(0,r.jsx)(z.Z,{elevation:0,className:e.filesPaper,children:(0,r.jsx)(pe.Z,{dense:!0,className:e.filesList,children:u.length>0?u.map((function(t,n){return(0,r.jsxs)(fe.Z,{className:e.filesListItem,children:[(0,r.jsx)(he.Z,{className:e.filesListItemText,primary:t.name,secondary:h(t.size)}),(0,r.jsx)(xe.Z,{children:(0,r.jsx)(U.Z,{style:{marginTop:40},onClick:function(){return e=n,Qe=De(Qe.slice(0,e)).concat(De(Qe.slice(e+1))),d(Qe),void Zt();var e},edge:"end","aria-label":"delete",children:(0,r.jsx)(me.Z,{})})})]},n)})):(0,Z.F)("drag_drop_files")})}),(0,r.jsx)("input",ze({},bt(),{className:e.input,id:"dec-file",type:"file",onChange:function(e){return wt(e.target.files)},multiple:!0})),(0,r.jsx)("label",{htmlFor:"dec-file",children:(0,r.jsx)(W.Z,{className:e.browseButton,component:"span",startIcon:u.length>0?(0,r.jsx)(ue.Z,{}):(0,r.jsx)(re.Z,{}),children:u.length>0?(0,Z.F)("add_files"):(0,Z.F)("browse_files")})}),u.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(W.Z,{onClick:function(){return d(Qe=[]),void Zt()},className:e.resetButton,component:"span",startIcon:(0,r.jsx)(de.Z,{}),children:(0,Z.F)("reset")}),(0,r.jsxs)("small",{className:e.filesInfo,children:[u.length," ",u.length>1?(0,Z.F)("files"):(0,Z.F)("file")]})]})]})}),(0,r.jsxs)("div",{className:e.actionsContainer,children:[(0,r.jsx)("div",{children:(0,r.jsx)(W.Z,{disabled:We||0===u.length,variant:"contained",onClick:Ft,className:"".concat(e.nextButton," nextBtnHs submitFileDec"),startIcon:We&&(0,r.jsx)(L.Z,{size:24,className:e.buttonProgress}),fullWidth:!0,children:We?(0,Z.F)("checking_file"):(0,Z.F)("next")})}),Ze&&(0,r.jsxs)(B.Z,{severity:"error",style:{marginTop:15},children:[(0,Z.F)("file_not_encrypted_corrupted"),(0,r.jsx)("br",{}),u.length>1?(0,r.jsx)("strong",{children:Ze}):""]}),Se&&(0,r.jsxs)(B.Z,{severity:"error",style:{marginTop:15},children:[(0,Z.F)("old_version")," ",(0,r.jsx)("a",{href:"https://v1.hat.sh/",target:"_blank",rel:"noreferrer",children:"https://v1.hat.sh"}),(0,r.jsx)("br",{}),u.length>1?(0,r.jsx)("strong",{children:Se}):""]}),Pe&&(0,r.jsx)(B.Z,{severity:"error",style:{marginTop:15},children:(0,Z.F)("file_mixup")})]}),!Ze&&!Se&&!Pe&&(0,r.jsx)(M.Z,{className:e.offline,children:(0,Z.F)("offline_note")})]})]},1),(0,r.jsxs)(R.Z,{children:[(0,r.jsx)(O.Z,{StepIconProps:{classes:{root:e.stepIcon,active:e.activeStepIcon,completed:e.completedStepIcon}},children:"secretKey"===_?(0,Z.F)("enter_password_dec"):(0,Z.F)("enter_keys_dec")}),(0,r.jsxs)(E.Z,{children:["secretKey"===_&&(0,r.jsx)(D.Z,{required:!0,type:ct?"text":"password",error:!!Ke,id:Ke?"outlined-error-helper-text":"outlined-required",className:"decPasswordInput",label:Ke?(0,Z.F)("error"):(0,Z.F)("required"),helperText:Ke?(0,Z.F)("wrong_password"):"",placeholder:(0,Z.F)("password"),variant:"outlined",value:g||"",onChange:function(e){return t=e.target.value,v(t),Ge=t,void Re(!1);var t},fullWidth:!0,InputProps:{endAdornment:(0,r.jsx)(Y.ZP,{title:(0,Z.F)("show_password"),placement:"left",children:(0,r.jsx)(U.Z,{onClick:function(){return lt(!ct)},children:ct?(0,r.jsx)(ie.Z,{}):(0,r.jsx)(oe.Z,{})})})}}),"publicKey"===_&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(D.Z,{id:"public-key-input-dec",required:!0,error:!(!J&&!be),helperText:J?(0,Z.F)("wrong_public_key"):"",label:(0,Z.F)("sender_public_key"),placeholder:(0,Z.F)("enter_sender_public_key"),variant:"outlined",value:F||"",onChange:function(e){return t=e.target.value,S(t),Je=t,void X(!1);var t},fullWidth:!0,style:{marginBottom:"15px"},InputProps:{endAdornment:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{accept:".public",className:e.input,id:"dec-public-key-file",type:"file",onChange:function(e){return function(e){if(e&&e.size<=1e6){var t=new FileReader;t.readAsText(e),t.onload=function(){S(t.result),Je=t.result}}}(e.target.files[0])}}),(0,r.jsx)("label",{htmlFor:"dec-public-key-file",children:(0,r.jsx)(Y.ZP,{title:(0,Z.F)("load_public_key"),placement:"left",children:(0,r.jsx)(U.Z,{"aria-label":(0,Z.F)("load_public_key"),component:"span",children:(0,r.jsx)(ee.Z,{})})})})]})}}),(0,r.jsx)(D.Z,{id:"private-key-input-dec",type:G?"text":"password",required:!0,error:!(!te&&!be),helperText:te?(0,Z.F)("wrong_private_key"):"",label:(0,Z.F)("your_private_key_dec"),placeholder:(0,Z.F)("enter_private_key_dec"),variant:"outlined",value:I||"",onChange:function(e){return t=e.target.value,P(t),Ve=t,void se(!1);var t},fullWidth:!0,style:{marginBottom:"15px"},InputProps:{endAdornment:(0,r.jsxs)(r.Fragment,{children:[I&&(0,r.jsx)(Y.ZP,{title:(0,Z.F)("show_private_key"),placement:"left",children:(0,r.jsx)(U.Z,{onClick:function(){return $(!G)},children:G?(0,r.jsx)(ie.Z,{}):(0,r.jsx)(oe.Z,{})})}),(0,r.jsx)("input",{accept:".private",className:e.input,id:"dec-private-key-file",type:"file",onChange:function(e){return function(e){if(e&&e.size<=1e6){var t=new FileReader;t.readAsText(e),t.onload=function(){P(t.result),Ve=t.result}}}(e.target.files[0])}}),(0,r.jsx)("label",{htmlFor:"dec-private-key-file",children:(0,r.jsx)(Y.ZP,{title:(0,Z.F)("load_private_key"),placement:"left",children:(0,r.jsx)(U.Z,{"aria-label":(0,Z.F)("load_private_key"),component:"span",children:(0,r.jsx)(ee.Z,{})})})})]})}})]}),(0,r.jsx)("div",{className:e.actionsContainer,children:(0,r.jsxs)("div",{children:[(0,r.jsxs)(N.Z,{container:!0,spacing:1,children:[(0,r.jsx)(N.Z,{item:!0,children:(0,r.jsx)(W.Z,{disabled:0===o||nt||it,onClick:jt,className:e.backButton,fullWidth:!0,children:(0,Z.F)("back")})}),(0,r.jsx)(N.Z,{item:!0,xs:!0,children:(0,r.jsx)(W.Z,{disabled:"secretKey"===_&&!g||"publicKey"===_&&(!F||!I)||nt||it,variant:"contained",onClick:It,className:"".concat(e.nextButton," nextBtnHs submitKeysDec"),startIcon:(nt||it)&&(0,r.jsx)(L.Z,{size:24,className:e.buttonProgress}),fullWidth:!0,children:nt?"".concat(m+1,"/").concat(Ye," ").concat((0,Z.F)("testing_password")):it?"".concat(m+1,"/").concat(Ye," ").concat((0,Z.F)("testing_keys")):(0,Z.F)("next")})})]}),(0,r.jsx)("br",{}),"secretKey"===_&&u.length>1&&Ke&&!nt&&(0,r.jsxs)(B.Z,{severity:"error",children:[(0,r.jsx)("strong",{children:u[et].name})," ",(0,Z.F)("file_has_wrong_password")]}),"publicKey"===_&&be&&(0,r.jsx)(B.Z,{severity:"error",children:je}),"publicKey"===_&&(te||J)&&!it&&!be&&(0,r.jsx)(r.Fragment,{children:u.length>1&&(0,r.jsxs)(B.Z,{severity:"error",children:[(0,r.jsx)("strong",{children:u[et].name})," ",(0,Z.F)("file_has_wrong_keys")]})})]})})]})]},2),(0,r.jsxs)(R.Z,{children:[(0,r.jsx)(O.Z,{StepIconProps:{classes:{root:e.stepIcon,active:e.activeStepIcon,completed:e.completedStepIcon}},children:(0,Z.F)("download_decrypted_files")}),(0,r.jsxs)(E.Z,{children:[u.length>0&&(0,r.jsxs)(B.Z,{severity:"success",icon:(0,r.jsx)(Ae.Z,{}),children:[(0,r.jsx)("strong",{children:u.length>1?u.length:u[0].name})," ",u.length>1?(0,Z.F)("files_ready_to_download"):(0,Z.F)("ready_to_download")]}),(0,r.jsxs)("div",{className:e.actionsContainer,children:[(0,r.jsxs)(N.Z,{container:!0,spacing:1,children:[(0,r.jsx)(N.Z,{item:!0,children:(0,r.jsx)(W.Z,{disabled:0===o||dt,onClick:jt,className:e.backButton,children:(0,Z.F)("back")})}),(0,r.jsx)(N.Z,{item:!0,xs:!0,children:(0,r.jsx)(W.Z,{disabled:dt||!g&&!F&&!I||0===u.length,variant:"contained",color:"primary",className:"".concat(e.nextButton," nextBtnHs"),startIcon:dt?(0,r.jsx)(L.Z,{size:24,className:e.buttonProgress}):(0,r.jsx)(ae.Z,{}),fullWidth:!0,children:(0,r.jsx)("a",{onClick:function(e){return Tt(e)},className:"downloadFileDec",style:{width:"100%",textDecoration:"none"},children:dt?"".concat(m+1,"/").concat(Ye," ").concat((0,Z.F)("downloading_file")):(0,Z.F)("decrypted_files")})})})]}),(0,r.jsx)("br",{}),dt&&(0,r.jsx)(B.Z,{variant:"outlined",severity:"info",children:(0,Z.F)("page_close_alert")})]})]})]},3)]}),3===o&&(0,r.jsxs)(z.Z,{elevation:1,className:e.resetContainer,children:[(0,r.jsxs)(B.Z,{variant:"outlined",severity:"success",style:{border:"none"},children:[(0,r.jsx)(K.Z,{children:(0,Z.F)("success")}),(0,Z.F)("success_downloaded_files_dec")]}),(0,r.jsx)(W.Z,{onClick:function(){s(0),d([]),v(),Re(!1),we(!1),Ce(!1),Te(!1),S(),P(),Ve=null,Je=null,X(!1),se(!1),ge(!1),xt(!1),qe=null,He=null,Qe=[],Ye=0,_t(),t.replace(t.pathname)},className:e.button,variant:"outlined",startIcon:(0,r.jsx)(ne.Z,{}),fullWidth:!0,style:{textTransform:"none"},children:(0,Z.F)("decrypt_other_files")})]})]}))}var nt=n(1591),rt=n(5258),at=n(3832),it=n(7821),ot=n(1423);function st(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){st(e,t,n[t])}))}return e}function lt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ut=(0,nt.Z)({indicator:{display:"none"}})((function(e){return(0,r.jsx)(it.Z,ct({},e,{TabIndicatorProps:{children:(0,r.jsx)("span",{})}}))})),dt=(0,nt.Z)((function(e){return{root:{textTransform:"none",padding:"8px",transition:"background-color 0.2s ease-out","&$selected":{backgroundColor:e.palette.white.main,boxShadow:"rgba(149, 157, 165, 0.2) 0px 8px 24px",borderRadius:"8px"}},selected:{}}}))((function(e){return(0,r.jsx)(ot.Z,ct({disableRipple:!0},e))})),pt=(0,i.Z)((function(e){return{root:{maxWidth:"768px"},bar:{marginTop:35,backgroundColor:e.palette.gallery.main,borderRadius:"8px",padding:8},TabPanel:{marginTop:15},tab:{color:e.palette.mineShaft.main}}}));function ft(e){var t=e.children,n=e.value,a=e.index,i=lt(e,["children","value","index"]);return(0,r.jsx)("div",ct({component:"div",role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},i,{children:t}))}function ht(){var e=pt(),t=(0,c.useRouter)(),n=t.query,i=(0,a.useState)(0),o=i[0],s=i[1],l={tab:0,label:(0,Z.F)("encryption")},u={tab:1,label:(0,Z.F)("decryption")};return(0,a.useEffect)((function(){n.tab&&"encryption"===n.tab&&s(l.tab),n.tab&&"decryption"===n.tab&&s(u.tab)}),[u.tab,l.tab,n.tab]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(at.Z,{className:e.root,children:[(0,r.jsx)(rt.Z,{position:"static",className:e.bar,elevation:0,children:(0,r.jsxs)(ut,{value:o,onChange:function(e,n){s(n),t.replace(t.pathname)},variant:"fullWidth",centered:!0,children:[(0,r.jsx)(dt,{label:l.label,className:e.tab}),(0,r.jsx)(dt,{label:u.label,className:e.tab})]})}),(0,r.jsx)(ft,{value:o,index:l.tab,className:e.TabPanel,children:(0,r.jsx)(Ke,{})}),(0,r.jsx)(ft,{value:o,index:u.tab,className:e.TabPanel,children:(0,r.jsx)(tt,{})})]})})}ft.propTypes={children:u().node,index:u().any.isRequired,value:u().any.isRequired};var xt=n(6278),mt=n(2663),yt=n(9525),bt=n(7212),gt=n(6856),vt=(0,i.Z)((function(e){return{topScrollPaper:{alignItems:"start",marginTop:"20vh"},topPaperScrollBody:{verticalAlign:"middle"}}})),jt=function(){var e=vt(),t=(0,a.useState)(!1),n=t[0],i=t[1];return(0,a.useEffect)((function(){var e=Math.round(Math.random()*Math.pow(36,12));localStorage.setItem("tabId",e),window.addEventListener("storage",(function(t){"tabId"==t.key&&localStorage.setItem("tab",localStorage.getItem("tabId")),"tab"==t.key&&localStorage.getItem("tabId")!==e&&i(!0)}),!1)}),[]),(0,r.jsxs)(mt.Z,{maxWidth:"sm",fullWidth:!0,open:n,PaperProps:{elevation:0},classes:{scrollPaper:e.topScrollPaper,paperScrollBody:e.topPaperScrollBody},children:[(0,r.jsx)(yt.Z,{children:(0,r.jsx)(bt.Z,{children:(0,r.jsxs)(B.Z,{severity:"warning",style:{fontSize:16},children:[(0,r.jsx)(K.Z,{style:{fontSize:20,marginBottom:15},children:(0,Z.F)("multiple_tabs_alert")}),(0,Z.F)("multiple_tabs_alert_notice_one"),(0,r.jsx)("br",{}),(0,Z.F)("multiple_tabs_alert_notice_two"),(0,r.jsx)("br",{})]})})}),(0,r.jsx)(gt.Z,{children:(0,r.jsx)(W.Z,{onClick:function(){i(!1)},color:"primary",children:(0,Z.F)("understand")})})]})},_t=(0,i.Z)((function(e){return{body:{backgroundColor:e.palette.alabaster.main,minHeight:"100vh",display:"flex",flexDirection:"column"}}})),kt=function(){var e=_t();return(0,r.jsxs)("div",{className:e.body,children:[(0,r.jsx)(jt,{}),(0,r.jsx)(o.Z,{}),(0,r.jsx)(s.Z,{}),(0,r.jsx)(ht,{}),(0,r.jsx)(xt.Z,{})]})};function Zt(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,a)}function wt(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Zt(i,r,a,o,s,"next",e)}function s(e){Zt(i,r,a,o,s,"throw",e)}o(void 0)}))}}function Ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function St(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ft(e,t,n[t])}))}return e}var Ct,It,Pt,Tt,Bt,Kt,Nt,At,Rt=n(6869),Ot=(0,i.Z)((function(e){return{root:{width:"100%"},offline:{fontSize:12,float:"right",color:e.palette.diamondBlack.main},stepper:{backgroundColor:"transparent"},stepIcon:{"&$activeStepIcon":{color:e.palette.emperor.main},"&$completedStepIcon":{color:e.palette.emperor.main}},activeStepIcon:{},completedStepIcon:{},button:Ft({marginTop:e.spacing(1),marginRight:e.spacing(1),borderRadius:"8px",border:"none",color:e.palette.mineShaft.main,backgroundColor:e.palette.mercury.light,"&:hover":{backgroundColor:e.palette.mercury.main},transition:"background-color 0.2s ease-out"},"transition","color .01s"),browseButton:Ft({padding:8,paddingLeft:15,paddingRight:15,textTransform:"none",borderRadius:"8px",border:"none",color:e.palette.mineShaft.main,backgroundColor:e.palette.alto.light,"&:hover":{backgroundColor:e.palette.alto.main},transition:"background-color 0.2s ease-out"},"transition","color .01s"),backButton:{marginTop:e.spacing(1),marginRight:e.spacing(1),borderRadius:"8px",backgroundColor:e.palette.mercury.main,transition:"color .01s"},nextButton:{marginTop:e.spacing(1),marginRight:e.spacing(1),borderRadius:"8px",backgroundColor:e.palette.primary.main,color:e.palette.white.main,"&:hover":{backgroundColor:e.palette.mineShaft.main},transition:"color .01s"},actionsContainer:{marginBottom:e.spacing(2)},resetContainer:{padding:e.spacing(3),boxShadow:"rgba(149, 157, 165, 0.4) 0px 8px 24px",borderRadius:"8px"},input:{display:"none"},fileArea:{padding:"20px",border:"5px dashed",borderColor:e.palette.gallery.main,borderRadius:"14px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",marginBottom:"10px"}}})),Et=function(){var e=Ot(),t=(0,c.useRouter)(),n=t.query,i=(0,a.useState)(0),o=i[0],s=i[1],l=(0,a.useState)(),u=l[0],d=l[1],m=(0,a.useState)(!1),y=m[0],b=m[1],g=(0,a.useState)(),v=g[0],_=g[1],k=(0,a.useState)(!1),w=k[0],F=k[1],S=(0,a.useState)(),C=S[0],I=S[1],ue=(0,a.useState)(),de=ue[0],ye=ue[1],be=(0,a.useState)(!1),ge=be[0],ve=be[1],je=(0,a.useState)(!1),_e=je[0],ke=je[1],Ze=(0,a.useState)(!1),we=Ze[0],Fe=Ze[1],Se=(0,a.useState)(!1),Ce=Se[0],Ie=Se[1],Pe=(0,a.useState)(),Te=Pe[0],Be=Pe[1],Ke=(0,a.useState)(!1),Ne=Ke[0],Ae=Ke[1],Re=(0,a.useState)("secretKey"),Oe=Re[0],Ee=Re[1],We=(0,a.useState)(!1),ze=We[0],Me=We[1],De=(0,a.useState)(),Le=De[0],qe=De[1],He=(0,a.useState)(!1),Ue=He[0],Ge=He[1],Ye=(0,a.useState)(),$e=Ye[0],Ve=Ye[1],Je=(0,a.useState)(!1),Xe=Je[0],Qe=Je[1],et=(0,f.uI)({onDrop:function(e){lt(e[0])},noClick:!0,noKeyboard:!0,disabled:0!==o}),tt=et.getRootProps,nt=et.getInputProps,rt=et.isDragActive,at=function(){s((function(e){return e+1}))},it=function(){s((function(e){return e-1})),ke(!1),Fe(!1),Ie(!1),Ae(!1)},ot=function(e){Ee(e.target.value)},st=function(){Ge(!Ue)},ct=function(){var e=wt(p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rt.ready;case 2:n=(t=Rt).to_base64(t.randombytes_buf(16),t.base64_variants.URLSAFE_NO_PADDING),_(n),Ae(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),lt=function(e){e.size>T.Tb?(b(!0),d()):(d(e),b(!1))},ut=function(){var e=wt(p().mark((function e(t,n,r){var a,i,o,c,l;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rt.ready;case 2:if(a=Rt,e.prev=3,i=a.crypto_scalarmult_base(a.from_base64(t)),i=a.to_base64(i),t!==n&&n!==i){e.next=10;break}return Ie(!0),Be((0,Z.F)("invalid_key_pair")),e.abrupt("return");case 10:if(a.from_base64(t).length===a.crypto_kx_SECRETKEYBYTES){e.next=13;break}return Fe(!0),e.abrupt("return");case 13:if(a.from_base64(n).length===a.crypto_kx_PUBLICKEYBYTES){e.next=16;break}return ke(!0),e.abrupt("return");case 16:if(!(o=a.crypto_kx_client_session_keys(a.crypto_scalarmult_base(a.from_base64(t)),a.from_base64(t),a.from_base64(n)))){e.next=21;break}c=[o.sharedRx,o.sharedTx],Nt=c[0],At=c[1],"test"===r&&Nt&&At&&s(2),"derive"===r&&Nt&&At&&(l=a.crypto_secretstream_xchacha20poly1305_init_push(At),Tt=l.state,Bt=l.header),e.next=24;break;case 21:return Ie(!0),Be((0,Z.F)("invalid_key_pair")),e.abrupt("return");case 24:e.next=31;break;case 26:return e.prev=26,e.t0=e.catch(3),Ie(!0),Be((0,Z.F)("invalid_keys_input")),e.abrupt("return");case 31:case"end":return e.stop()}}),e,null,[[3,26]])})));return function(t,n,r){return e.apply(this,arguments)}}(),dt=function(){var e=wt(p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("secretKey"!==Oe){e.next=4;break}return e.next=3,pt(v);case 3:ft(u);case 4:if("publicKey"!==Oe){e.next=11;break}return"derive",t=de,n=C,e.next=10,ut(t,n,"derive");case 10:ft(u);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pt=function(){var e=wt(p().mark((function e(t){var n,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rt.ready;case 2:It=(n=Rt).randombytes_buf(n.crypto_pwhash_SALTBYTES),Pt=n.crypto_pwhash(n.crypto_secretstream_xchacha20poly1305_KEYBYTES,t,It,n.crypto_pwhash_OPSLIMIT_INTERACTIVE,n.crypto_pwhash_MEMLIMIT_INTERACTIVE,n.crypto_pwhash_ALG_ARGON2ID13),r=n.crypto_secretstream_xchacha20poly1305_init_push(Pt),Tt=r.state,Bt=r.header;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ft=function(e){if("secretKey"===Oe){var t=new Uint8Array(T.g7.encode(T.J8.v2_symmetric));Me(!0),(Kt=[]).push(t),Kt.push(It),Kt.push(Bt),e.slice(0,T.kr).arrayBuffer().then((function(t){var n=(Ct=T.kr)>=e.size;ht(n,t,e)}))}if("publicKey"===Oe){var n=new Uint8Array(T.g7.encode(T.J8.v2_asymmetric));Me(!0),(Kt=[]).push(n),Kt.push(Bt),e.slice(0,T.kr).arrayBuffer().then((function(t){var n=(Ct=T.kr)>=e.size;ht(n,t,e)}))}},ht=function(){var e=wt(p().mark((function e(t,n,r){var a,i,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rt.ready;case 2:a=Rt,i=t?a.crypto_secretstream_xchacha20poly1305_TAG_FINAL:a.crypto_secretstream_xchacha20poly1305_TAG_MESSAGE,o=a.crypto_secretstream_xchacha20poly1305_push(Tt,new Uint8Array(n),null,i),Kt.push(new Uint8Array(o)),t&&mt(),t||xt(r);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),xt=function(e){e.slice(Ct,Ct+T.kr).arrayBuffer().then((function(t){var n=(Ct+=T.kr)>=e.size;ht(n,t,e)}))},mt=function(){Me(!1),at()},yt=function(){var e=wt(p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(de);case 2:t=e.sent,n=window.location.origin+"/?tab=decryption&publicKey="+t,qe(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){"encryption"===n.tab&&n.publicKey&&(I(n.publicKey),Qe(!0),Ee("publicKey"))}),[n.publicKey,n.tab]),(0,r.jsxs)("div",St({className:e.root},tt(),{children:[(0,r.jsx)(Q.Z,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:Ue,autoHideDuration:2e3,onClose:st,children:(0,r.jsx)(B.Z,{severity:"success",children:$e})}),(0,r.jsx)(q.Z,{open:rt,style:{zIndex:10},children:(0,r.jsxs)(M.Z,{variant:"h2",gutterBottom:!0,style:{color:"#fff",textAlign:"center"},children:[(0,r.jsx)("img",{src:"/assets/images/logo2.png",width:"100",height:"100",alt:"hat.sh logo"}),(0,r.jsx)("br",{}),(0,Z.F)("drop_file_enc")]})}),(0,r.jsx)(ce.Z,{in:Xe,style:{marginTop:5},children:(0,r.jsx)(B.Z,{severity:"success",action:(0,r.jsx)(U.Z,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){Qe(!1)},children:(0,r.jsx)(le.Z,{fontSize:"inherit"})}),children:(0,Z.F)("recipient_key_loaded")})}),(0,r.jsxs)(A.Z,{activeStep:o,orientation:"vertical",className:e.stepper,children:[(0,r.jsxs)(R.Z,{children:[(0,r.jsx)(O.Z,{StepIconProps:{classes:{root:e.stepIcon,active:e.activeStepIcon,completed:e.completedStepIcon}},children:(0,Z.F)("choose_file_enc")}),(0,r.jsxs)(E.Z,{children:[(0,r.jsx)("div",{className:"wrapper p-3",id:"encFileWrapper",children:(0,r.jsxs)("div",{className:e.fileArea,id:"encFileArea",children:[(0,r.jsx)(z.Z,{elevation:0,style:{overflow:"auto",maxHeight:"280px",backgroundColor:"transparent"},children:(0,r.jsx)(pe.Z,{dense:!0,style:{display:"flex",flex:"1",flexWrap:"wrap",alignContent:"center",justifyContent:"center"},children:u?(0,r.jsxs)(fe.Z,{style:{backgroundColor:"#ebebeb",borderRadius:"8px",padding:15},children:[(0,r.jsx)(he.Z,{style:{width:"200px",minHeight:"50px",maxHeight:"50px",textAlign:"center"},primary:u.name,secondary:h(u.size)}),(0,r.jsx)(xe.Z,{children:(0,r.jsx)(U.Z,{style:{marginTop:40},onClick:function(){return d()},edge:"end","aria-label":"delete",children:(0,r.jsx)(me.Z,{})})})]}):(0,Z.F)("drag_drop")})}),(0,r.jsx)("input",St({},nt(),{className:e.input,id:"enc-file",type:"file",onChange:function(e){return lt(e.target.files[0])}})),(0,r.jsxs)("label",{htmlFor:"enc-file",children:[(0,r.jsx)("br",{}),(0,r.jsx)(W.Z,{className:e.browseButton,component:"span",startIcon:(0,r.jsx)(re.Z,{}),children:u?(0,Z.F)("change_file"):(0,Z.F)("browse_file")})]})]})}),(0,r.jsxs)("div",{className:e.actionsContainer,children:[(0,r.jsx)(W.Z,{fullWidth:!0,disabled:!u||y,variant:"contained",onClick:at,className:"".concat(e.nextButton," nextBtnHs"),children:(0,Z.F)("next")}),y&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(B.Z,{severity:"error",style:{marginTop:15},children:[(0,r.jsx)("strong",{children:(0,Z.F)("file_too_big")})," ",(0,Z.F)("choose_file_1gb")]})})]}),!y&&(0,r.jsx)(M.Z,{className:e.offline,children:(0,Z.F)("offline_note")})]})]},1),(0,r.jsxs)(R.Z,{children:[(0,r.jsx)(O.Z,{StepIconProps:{classes:{root:e.stepIcon,active:e.activeStepIcon,completed:e.completedStepIcon}},children:"secretKey"===Oe?(0,Z.F)("enter_password_enc"):(0,Z.F)("enter_keys_enc")}),(0,r.jsxs)(E.Z,{children:[(0,r.jsx)(X.Z,{component:"fieldset",style:{float:"right",marginBottom:"15px"},children:(0,r.jsxs)(V.Z,{row:!0,defaultValue:Oe,"aria-label":"encryption options",children:[(0,r.jsx)(J.Z,{value:"secretKey",control:(0,r.jsx)($.Z,{color:"default"}),label:(0,Z.F)("password"),labelPlacement:"end",onChange:ot}),(0,r.jsx)(J.Z,{value:"publicKey",control:(0,r.jsx)($.Z,{color:"default"}),label:(0,Z.F)("public_key"),labelPlacement:"end",onChange:ot})]})}),"secretKey"===Oe&&(0,r.jsx)(D.Z,{required:!0,error:!!Ne,type:w?"text":"password",id:"outlined-required",label:(0,Z.F)("required"),placeholder:(0,Z.F)("password"),helperText:v?(0,r.jsx)(Y.ZP,{title:"".concat((0,Z.F)("crackTimeEstimation")," ").concat(P(v)[1]),placement:"right",arrow:!0,children:(0,r.jsxs)("span",{children:[(0,Z.F)("password_strength"),": ",(0,r.jsx)("strong",{children:P(v)[0]})]})}):(0,Z.F)("choose_strong_password"),variant:"outlined",value:v||"",onChange:function(e){return t=e.target.value,void _(t);var t},fullWidth:!0,InputProps:{endAdornment:(0,r.jsxs)(r.Fragment,{children:[v&&(0,r.jsx)(Y.ZP,{title:(0,Z.F)("show_password"),placement:"left",children:(0,r.jsx)(U.Z,{onClick:function(){return F(!w)},children:w?(0,r.jsx)(ie.Z,{}):(0,r.jsx)(oe.Z,{})})}),(0,r.jsx)(Y.ZP,{title:(0,Z.F)("generate_password"),placement:"left",children:(0,r.jsx)(U.Z,{onClick:ct,className:"generatePasswordBtn",children:(0,r.jsx)(G.Z,{})})})]})}}),"publicKey"===Oe&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(D.Z,{required:!0,error:!!_e,label:_e?(0,Z.F)("error"):(0,Z.F)("recipient_public_key"),helperText:_e?(0,Z.F)("wrong_public_key"):"",placeholder:(0,Z.F)("enter_recipient_public_key"),variant:"outlined",value:C||"",onChange:function(e){return t=e.target.value,I(t),void ke(!1);var t},fullWidth:!0,style:{marginBottom:"15px"},InputProps:{endAdornment:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{accept:".public",className:e.input,id:"public-key-file",type:"file",onChange:function(e){return function(e){if(e&&e.size<=1e6){var t=new FileReader;t.readAsText(e),t.onload=function(){I(t.result)},ke(!1)}}(e.target.files[0])}}),(0,r.jsx)("label",{htmlFor:"public-key-file",children:(0,r.jsx)(Y.ZP,{title:(0,Z.F)("load_public_key"),placement:"left",children:(0,r.jsx)(U.Z,{"aria-label":(0,Z.F)("load_public_key"),component:"span",children:(0,r.jsx)(ee.Z,{})})})})]})}}),(0,r.jsx)(D.Z,{type:ge?"text":"password",required:!0,error:!!we,label:we?(0,Z.F)("error"):(0,Z.F)("your_private_key_enc"),helperText:we?(0,Z.F)("wrong_private_key"):"",placeholder:(0,Z.F)("enter_private_key_enc"),variant:"outlined",value:de||"",onChange:function(e){return t=e.target.value,ye(t),void Fe(!1);var t},fullWidth:!0,style:{marginBottom:"15px"},InputProps:{endAdornment:(0,r.jsxs)(r.Fragment,{children:[de&&(0,r.jsx)(Y.ZP,{title:(0,Z.F)("show_private_key"),placement:"left",children:(0,r.jsx)(U.Z,{onClick:function(){return ve(!ge)},children:ge?(0,r.jsx)(ie.Z,{}):(0,r.jsx)(oe.Z,{})})}),(0,r.jsx)("input",{accept:".private",className:e.input,id:"private-key-file",type:"file",onChange:function(e){return function(e){if(e&&e.size<=1e6){var t=new FileReader;t.readAsText(e),t.onload=function(){ye(t.result)},Fe(!1)}}(e.target.files[0])}}),(0,r.jsx)("label",{htmlFor:"private-key-file",children:(0,r.jsx)(Y.ZP,{title:(0,Z.F)("load_private_key"),placement:"left",children:(0,r.jsx)(U.Z,{"aria-label":(0,Z.F)("load_private_key"),component:"span",children:(0,r.jsx)(ee.Z,{})})})})]})}}),(0,r.jsx)(x.Z,{})]}),(0,r.jsx)("div",{className:e.actionsContainer,style:{marginTop:15},children:(0,r.jsxs)("div",{children:[(0,r.jsxs)(N.Z,{container:!0,spacing:1,children:[(0,r.jsx)(N.Z,{item:!0,children:(0,r.jsx)(W.Z,{disabled:0===o,onClick:it,className:e.backButton,fullWidth:!0,children:(0,Z.F)("back")})}),(0,r.jsx)(N.Z,{item:!0,xs:!0,children:(0,r.jsx)(W.Z,{disabled:"secretKey"===Oe&&!v||"publicKey"===Oe&&(!C||!de),variant:"contained",onClick:function(){if("secretKey"===Oe&&(v.length>=12?s(2):Ae(!0)),"publicKey"===Oe){ut(de,C,"test")}},className:"".concat(e.nextButton," nextBtnHs"),fullWidth:!0,children:(0,Z.F)("next")})})]}),(0,r.jsx)("br",{}),"publicKey"===Oe&&Ce&&(0,r.jsx)(B.Z,{severity:"error",children:Te}),"secretKey"===Oe&&Ne&&(0,r.jsx)(B.Z,{severity:"error",children:(0,Z.F)("short_password")})]})})]})]},2),(0,r.jsxs)(R.Z,{children:[(0,r.jsx)(O.Z,{StepIconProps:{classes:{root:e.stepIcon,active:e.activeStepIcon,completed:e.completedStepIcon}},children:(0,Z.F)("encrypt_file")}),(0,r.jsxs)(E.Z,{children:[(0,r.jsxs)(B.Z,{severity:"success",icon:(0,r.jsx)(H.Z,{}),children:[(0,r.jsx)("strong",{children:u?u.name:""})," ",(0,Z.F)("ready_to_download")]}),(0,r.jsxs)("div",{className:e.actionsContainer,children:[(0,r.jsxs)(N.Z,{container:!0,spacing:1,children:[(0,r.jsx)(N.Z,{item:!0,children:(0,r.jsx)(W.Z,{disabled:0===o||ze,onClick:it,className:e.backButton,children:(0,Z.F)("back")})}),(0,r.jsx)(N.Z,{item:!0,xs:!0,children:(0,r.jsx)(W.Z,{onClick:dt,disabled:ze||!v&&!C&&!de||!u,variant:"contained",className:"".concat(e.nextButton," nextBtnHs"),startIcon:ze?(0,r.jsx)(L.Z,{size:24,className:e.buttonProgress}):(0,r.jsx)(H.Z,{}),fullWidth:!0,children:ze?(0,Z.F)("encrypting_file"):(0,Z.F)("encrypt_file")})})]}),(0,r.jsx)("br",{}),ze&&(0,r.jsx)(B.Z,{variant:"outlined",severity:"info",children:(0,Z.F)("page_close_alert_enc")})]})]})]},3)]}),3===o&&(0,r.jsxs)(z.Z,{elevation:1,className:e.resetContainer,children:[(0,r.jsxs)(B.Z,{variant:"outlined",severity:"success",style:{border:"none"},children:[(0,r.jsx)(K.Z,{children:(0,Z.F)("success")}),(0,Z.F)("success_encrypted"),"publicKey"===Oe&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:(0,Z.F)("after_enc_note_one")}),(0,r.jsx)("li",{children:(0,Z.F)("after_enc_note_two")})]})]})]}),(0,r.jsxs)(N.Z,{container:!0,spacing:1,children:[(0,r.jsx)(N.Z,{item:!0,xs:12,sm:12,children:(0,r.jsx)(W.Z,{onClick:function(){var e=u.name+".enc",t=new Blob(Kt),n=document.createElement("a");n.href=window.URL.createObjectURL(t),n.download=e,document.body.appendChild(n),n.click()},className:"".concat(e.nextButton," nextBtnHs"),variant:"contained",startIcon:(0,r.jsx)(ae.Z,{}),fullWidth:!0,style:{textTransform:"none"},children:(0,Z.F)("download_file")})}),"secretKey"===Oe&&(0,r.jsx)(N.Z,{item:!0,xs:12,sm:6,children:(0,r.jsx)(W.Z,{onClick:function(){navigator.clipboard.writeText(v),Ve((0,Z.F)("password_copied")),st()},className:e.button,startIcon:(0,r.jsx)(te.Z,{}),fullWidth:!0,style:{textTransform:"none"},children:(0,Z.F)("copy_password")})}),"publicKey"===Oe&&(0,r.jsx)(N.Z,{item:!0,xs:12,sm:6,children:(0,r.jsx)(Y.ZP,{title:"Create a link that has your public key",placement:"bottom",children:(0,r.jsx)(W.Z,{onClick:function(){return yt()},className:e.button,variant:"outlined",startIcon:(0,r.jsx)(se.Z,{}),fullWidth:!0,style:{textTransform:"none"},children:(0,Z.F)("create_shareable_link")})})}),(0,r.jsx)(N.Z,{item:!0,xs:12,sm:6,children:(0,r.jsx)(W.Z,{onClick:function(){s(0),d(),_(),Me(!1),I(),ye(),ke(!1),Fe(!1),Ie(!1),Ae(!1),qe(),Ve(),Qe(!1),null,Kt=null,Ct=null,Nt=null,At=null,t.replace(t.pathname)},className:e.button,startIcon:(0,r.jsx)(ne.Z,{}),fullWidth:!0,style:{textTransform:"none"},children:(0,Z.F)("encrypt_another_file")})}),"publicKey"===Oe&&Le&&(0,r.jsx)(D.Z,{style:{marginTop:15},defaultValue:Le,InputProps:{readOnly:!0,classes:{root:e.textFieldRoot,focused:e.textFieldFocused,notchedOutline:e.textFieldNotchedOutline},endAdornment:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(Y.ZP,{title:(0,Z.F)("copy_link"),placement:"left",children:(0,r.jsx)(U.Z,{onClick:function(){navigator.clipboard.writeText(Le),Ve((0,Z.F)("create_shareable_link_copied")),st()},children:(0,r.jsx)(te.Z,{})})})})},helperText:(0,Z.F)("create_shareable_link_note"),variant:"outlined",fullWidth:!0})]})]})]}))};function Wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zt(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,a)}function Mt(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){zt(i,r,a,o,s,"next",e)}function s(e){zt(i,r,a,o,s,"throw",e)}o(void 0)}))}}function Dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Dt(e,t,n[t])}))}return e}function qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(c){s=!0,a=c}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ht,Ut,Gt,Yt,$t,Vt,Jt=n(6869),Xt=(0,i.Z)((function(e){return{root:{width:"100%"},offline:{fontSize:12,float:"right",color:e.palette.diamondBlack.main},stepper:{backgroundColor:"transparent"},stepIcon:{"&$activeStepIcon":{color:e.palette.emperor.main},"&$completedStepIcon":{color:e.palette.emperor.main}},activeStepIcon:{},completedStepIcon:{},button:Dt({marginTop:e.spacing(1),marginRight:e.spacing(1),borderRadius:"8px",border:"none",color:e.palette.mineShaft.main,backgroundColor:e.palette.mercury.light,"&:hover":{backgroundColor:e.palette.mercury.main},transition:"background-color 0.2s ease-out"},"transition","color .01s"),browseButton:Dt({padding:8,paddingLeft:15,paddingRight:15,textTransform:"none",borderRadius:"8px",border:"none",color:e.palette.mineShaft.main,backgroundColor:e.palette.alto.light,"&:hover":{backgroundColor:e.palette.alto.main},transition:"background-color 0.2s ease-out"},"transition","color .01s"),backButton:{marginTop:e.spacing(1),marginRight:e.spacing(1),borderRadius:"8px",backgroundColor:e.palette.mercury.main,transition:"color .01s"},nextButton:{marginTop:e.spacing(1),marginRight:e.spacing(1),borderRadius:"8px",backgroundColor:e.palette.primary.main,color:e.palette.white.main,"&:hover":{backgroundColor:e.palette.mineShaft.main},transition:"color .01s"},actionsContainer:{marginBottom:e.spacing(2)},resetContainer:{padding:e.spacing(3),boxShadow:"rgba(149, 157, 165, 0.4) 0px 8px 24px",borderRadius:"8px"},input:{display:"none"},fileArea:{padding:"20px",border:"5px dashed",borderColor:e.palette.gallery.main,borderRadius:"14px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",marginBottom:"10px"}}})),Qt=function(){var e=Xt(),t=(0,a.useState)(0),n=t[0],i=t[1],o=(0,c.useRouter)(),s=o.query,l=(0,a.useState)(),u=l[0],d=l[1],x=(0,a.useState)(!1),m=x[0],y=x[1],b=(0,a.useState)(),g=b[0],v=b[1],j=(0,a.useState)("secretKey"),_=j[0],k=j[1],w=(0,a.useState)(),F=w[0],S=w[1],C=(0,a.useState)(),I=C[0],P=C[1],H=(0,a.useState)(!1),G=H[0],$=H[1],V=(0,a.useState)(!1),J=V[0],X=V[1],Q=(0,a.useState)(!1),te=Q[0],se=Q[1],ue=(0,a.useState)(!1),de=ue[0],ye=ue[1],be=(0,a.useState)(),ge=be[0],ve=be[1],je=(0,a.useState)(!1),_e=je[0],ke=je[1],Ze=(0,a.useState)(!1),we=Ze[0],Fe=Ze[1],Se=(0,a.useState)(!1),Ce=Se[0],Ie=Se[1],Pe=(0,a.useState)(!1),Te=Pe[0],Be=Pe[1],Ke=(0,a.useState)(!1),Ae=Ke[0],Re=Ke[1],Oe=(0,a.useState)(!1),Ee=Oe[0],We=Oe[1],ze=(0,a.useState)(!1),Me=ze[0],De=ze[1],Le=(0,a.useState)(!1),qe=Le[0],He=Le[1],Ue=(0,a.useState)(!1),Ge=Ue[0],Ye=Ue[1],$e=(0,f.uI)({onDrop:function(e){Qe(e[0])},noClick:!0,noKeyboard:!0,disabled:0!==n}),Ve=$e.getRootProps,Je=$e.getInputProps,Xe=$e.isDragActive,Qe=function(e){(Ht=e).size>T.Tb?(y(!0),d()):(d(e),y(!1)),Fe(!1),Ie(!1)},et=function(){var e=Mt(p().mark((function e(t,n,r,a){var i,o,s,c;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jt.ready;case 2:i=Jt;try{(o=i.crypto_kx_server_session_keys(i.crypto_scalarmult_base(i.from_base64(t)),i.from_base64(t),i.from_base64(n)))&&(s=[o.sharedRx,o.sharedTx],Vt=s[1],($t=s[0])&&Vt&&(c=i.crypto_secretstream_xchacha20poly1305_init_pull(new Uint8Array(r),$t))&&(We(!1),Re(!1),rt("publicKey",c)))}catch(a){ye(!0),ve((0,Z.F)("invalid_keys_input")),We(!1)}case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),tt=function(){var e=Mt(p().mark((function e(){var t,n,r,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jt.ready;case 2:t=Jt,"secretKey"===_&&(Re(!0),Ht=u,n=g,Promise.all([Ht.slice(11,27).arrayBuffer(),Ht.slice(27,51).arrayBuffer(),Ht.slice(51,51+T.kr+t.crypto_secretstream_xchacha20poly1305_ABYTES).arrayBuffer()]).then((function(e){var r=qt(e,3),a=r[0],i=r[1],o=r[2];Gt=o;var s=new Uint8Array(a),c=new Uint8Array(i),l=t.crypto_pwhash(t.crypto_secretstream_xchacha20poly1305_KEYBYTES,n,s,t.crypto_pwhash_OPSLIMIT_INTERACTIVE,t.crypto_pwhash_MEMLIMIT_INTERACTIVE,t.crypto_pwhash_ALG_ARGON2ID13),u=t.crypto_secretstream_xchacha20poly1305_init_pull(c,l);u&&(t.crypto_secretstream_xchacha20poly1305_pull(u,new Uint8Array(Gt))?(Re(!1),nt(n,a,i)):(Re(!1),Be(!0)))}))),"publicKey"===_&&(ye(!1),se(!1),X(!1),We(!0),Ht=u,r=I,a=F,Promise.all([Ht.slice(11,35).arrayBuffer(),Ht.slice(35,35+T.kr+t.crypto_secretstream_xchacha20poly1305_ABYTES).arrayBuffer()]).then((function(e){var n=qt(e,2),i=n[0],o=n[1];Gt=o;var s=new Uint8Array(i);try{var c=t.crypto_scalarmult_base(t.from_base64(r));if(c=t.to_base64(c),r===a||a===c)return ye(!0),ve((0,Z.F)("invalid_key_pair")),void We(!1);if(t.from_base64(r).length!==t.crypto_kx_SECRETKEYBYTES)return se(!0),void We(!1);if(t.from_base64(a).length!==t.crypto_kx_PUBLICKEYBYTES)return X(!0),void We(!1);var l,u=t.crypto_kx_server_session_keys(t.crypto_scalarmult_base(t.from_base64(r)),t.from_base64(r),t.from_base64(a));if(u)if(l=[u.sharedRx,u.sharedTx],Vt=l[1],($t=l[0])&&Vt){var d=t.crypto_secretstream_xchacha20poly1305_init_pull(new Uint8Array(s),$t);if(d)t.crypto_secretstream_xchacha20poly1305_pull(d,new Uint8Array(Gt))?(We(!1),Re(!1),et(r,a,s,Gt)):(X(!0),se(!0),We(!1))}}catch(p){ye(!0),ve((0,Z.F)("invalid_keys_input")),We(!1)}})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nt=function(){var e=Mt(p().mark((function e(t,n,r){var a,i,o,s,c;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jt.ready;case 2:a=Jt,Ht=u,i=new Uint8Array(n),o=new Uint8Array(r),s=a.crypto_pwhash(a.crypto_secretstream_xchacha20poly1305_KEYBYTES,t,i,a.crypto_pwhash_OPSLIMIT_INTERACTIVE,a.crypto_pwhash_MEMLIMIT_INTERACTIVE,a.crypto_pwhash_ALG_ARGON2ID13),(c=a.crypto_secretstream_xchacha20poly1305_init_pull(o,s))&&rt("secretKey",c);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),rt=function(e,t){var n;"secretKey"===e&&(n=51),"publicKey"===e&&(n=35),De(!0),Yt=[],(Ht=u).slice(n,n+T.kr+T.G0).arrayBuffer().then((function(e){var r=(Ut=n+T.kr+T.G0)>=Ht.size;it(r,e,t)}))},at=function(e){(Ht=u).slice(Ut,Ut+T.kr+T.G0).arrayBuffer().then((function(t){var n=(Ut+=T.kr+T.G0)>=Ht.size;it(n,t,e)}))},it=function(){var e=Mt(p().mark((function e(t,n,r){var a,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jt.ready;case 2:(a=Jt.crypto_secretstream_xchacha20poly1305_pull(r,new Uint8Array(n)))?(i=a.message,Yt.push(new Uint8Array(i)),t&&ot(),t||at(r)):(Be(!0),Re(!1));case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),ot=function(){i((function(e){return e+1})),De(!1)};return(0,a.useEffect)((function(){"decryption"===s.tab&&s.publicKey&&(S(s.publicKey),Ye(!0),k("publicKey"))}),[s.publicKey,s.tab]),(0,r.jsxs)("div",Lt({className:e.root},Ve(),{children:[(0,r.jsx)(q.Z,{open:Xe,style:{zIndex:10},children:(0,r.jsxs)(M.Z,{variant:"h2",gutterBottom:!0,style:{color:"#fff",textAlign:"center"},children:[(0,r.jsx)("img",{src:"/assets/images/logo2.png",width:"100",height:"100",alt:"hat.sh logo"}),(0,r.jsx)("br",{}),(0,Z.F)("drop_file_dec")]})}),(0,r.jsx)(ce.Z,{in:Ge,style:{marginTop:5},children:(0,r.jsx)(B.Z,{severity:"success",action:(0,r.jsx)(U.Z,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){Ye(!1)},children:(0,r.jsx)(le.Z,{fontSize:"inherit"})}),children:(0,Z.F)("sender_key_loaded")})}),(0,r.jsxs)(A.Z,{activeStep:n,orientation:"vertical",className:e.stepper,children:[(0,r.jsxs)(R.Z,{children:[(0,r.jsx)(O.Z,{StepIconProps:{classes:{root:e.stepIcon,active:e.activeStepIcon,completed:e.completedStepIcon}},children:(0,Z.F)("choose_file_dec")}),(0,r.jsxs)(E.Z,{children:[(0,r.jsx)("div",{className:"wrapper p-3",id:"encFileWrapper",children:(0,r.jsxs)("div",{className:e.fileArea,id:"encFileArea",children:[(0,r.jsx)(z.Z,{elevation:0,style:{overflow:"auto",maxHeight:"280px",backgroundColor:"transparent"},children:(0,r.jsx)(pe.Z,{dense:!0,style:{display:"flex",flex:"1",flexWrap:"wrap",alignContent:"center",justifyContent:"center"},children:u?(0,r.jsxs)(fe.Z,{style:{backgroundColor:"#ebebeb",borderRadius:"8px",padding:15},children:[(0,r.jsx)(he.Z,{style:{width:"200px",minHeight:"50px",maxHeight:"50px",textAlign:"center"},primary:u.name,secondary:h(u.size)}),(0,r.jsx)(xe.Z,{children:(0,r.jsx)(U.Z,{style:{marginTop:40},onClick:function(){return d(),Fe(!1),void Ie(!1)},edge:"end","aria-label":"delete",children:(0,r.jsx)(me.Z,{})})})]}):(0,Z.F)("drag_drop")})}),(0,r.jsx)("input",Lt({},Je(),{className:e.input,id:"dec-file",type:"file",onChange:function(e){return Qe(e.target.files[0])}})),(0,r.jsxs)("label",{htmlFor:"dec-file",children:[(0,r.jsx)("br",{}),(0,r.jsx)(W.Z,{className:e.browseButton,component:"span",startIcon:(0,r.jsx)(re.Z,{}),children:u?(0,Z.F)("change_file"):(0,Z.F)("browse_file")})]})]})}),(0,r.jsxs)("div",{className:e.actionsContainer,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(W.Z,{disabled:_e||!u,variant:"contained",onClick:function(){ke(!0),Fe(!1),Ie(!1),Promise.all([Ht.slice(0,11).arrayBuffer(),Ht.slice(0,22).arrayBuffer()]).then((function(e){var t=qt(e,2),n=t[0],r=t[1];T.xv.decode(n)===T.J8.v2_symmetric?(k("secretKey"),i(1),ke(!1)):T.xv.decode(n)===T.J8.v2_asymmetric?(k("publicKey"),i(1),ke(!1)):T.xv.decode(r)===T.J8.v1?(Ie(!0),ke(!1)):(Fe(!0),ke(!1))}))},className:"".concat(e.nextButton," nextBtnHs"),startIcon:_e&&(0,r.jsx)(L.Z,{size:24,className:e.buttonProgress}),fullWidth:!0,children:_e?(0,Z.F)("checking_file"):(0,Z.F)("next")}),m&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(B.Z,{severity:"error",style:{marginTop:15},children:[(0,r.jsx)("strong",{children:(0,Z.F)("file_too_big")})," ",(0,Z.F)("choose_file_1gb")]})})]}),we&&(0,r.jsx)(B.Z,{severity:"error",style:{marginTop:15},children:(0,Z.F)("file_not_encrypted_corrupted")}),Ce&&(0,r.jsxs)(B.Z,{severity:"error",style:{marginTop:15},children:[(0,Z.F)("old_version")," ",(0,r.jsx)("a",{href:"https://v1.hat.sh/",target:"_blank",rel:"noreferrer",children:"https://v1.hat.sh"})]})]}),!we&&!Ce&&!m&&(0,r.jsx)(M.Z,{className:e.offline,children:(0,Z.F)("offline_note")})]})]},1),(0,r.jsxs)(R.Z,{children:[(0,r.jsx)(O.Z,{StepIconProps:{classes:{root:e.stepIcon,active:e.activeStepIcon,completed:e.completedStepIcon}},children:"secretKey"===_?(0,Z.F)("enter_password_dec"):(0,Z.F)("enter_keys_dec")}),(0,r.jsxs)(E.Z,{children:["secretKey"===_&&(0,r.jsx)(D.Z,{required:!0,type:qe?"text":"password",error:!!Te,id:Te?"outlined-error-helper-text":"outlined-required",label:Te?(0,Z.F)("error"):(0,Z.F)("required"),helperText:Te?(0,Z.F)("wrong_password"):"",placeholder:(0,Z.F)("password"),variant:"outlined",value:g||"",onChange:function(e){return t=e.target.value,v(t),void Be(!1);var t},fullWidth:!0,InputProps:{endAdornment:(0,r.jsx)(Y.ZP,{title:(0,Z.F)("show_password"),placement:"left",children:(0,r.jsx)(U.Z,{onClick:function(){return He(!qe)},children:qe?(0,r.jsx)(ie.Z,{}):(0,r.jsx)(oe.Z,{})})})}}),"publicKey"===_&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(D.Z,{required:!0,error:!(!J&&!de),helperText:J?(0,Z.F)("wrong_public_key"):"",label:(0,Z.F)("sender_public_key"),placeholder:(0,Z.F)("enter_sender_public_key"),variant:"outlined",value:F||"",onChange:function(e){return t=e.target.value,S(t),void X(!1);var t},fullWidth:!0,style:{marginBottom:"15px"},InputProps:{endAdornment:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{accept:".public",className:e.input,id:"dec-public-key-file",type:"file",onChange:function(e){return function(e){if(e&&e.size<=1e6){var t=new FileReader;t.readAsText(e),t.onload=function(){S(t.result)}}}(e.target.files[0])}}),(0,r.jsx)("label",{htmlFor:"dec-public-key-file",children:(0,r.jsx)(Y.ZP,{title:(0,Z.F)("load_public_key"),placement:"left",children:(0,r.jsx)(U.Z,{"aria-label":(0,Z.F)("load_public_key"),component:"span",children:(0,r.jsx)(ee.Z,{})})})})]})}}),(0,r.jsx)(D.Z,{type:G?"text":"password",required:!0,error:!(!te&&!de),helperText:te?(0,Z.F)("wrong_private_key"):"",label:(0,Z.F)("your_private_key_dec"),placeholder:(0,Z.F)("enter_private_key_dec"),variant:"outlined",value:I||"",onChange:function(e){return t=e.target.value,P(t),void se(!1);var t},fullWidth:!0,style:{marginBottom:"15px"},InputProps:{endAdornment:(0,r.jsxs)(r.Fragment,{children:[I&&(0,r.jsx)(Y.ZP,{title:(0,Z.F)("show_private_key"),placement:"left",children:(0,r.jsx)(U.Z,{onClick:function(){return $(!G)},children:G?(0,r.jsx)(ie.Z,{}):(0,r.jsx)(oe.Z,{})})}),(0,r.jsx)("input",{accept:".private",className:e.input,id:"dec-private-key-file",type:"file",onChange:function(e){return function(e){if(e&&e.size<=1e6){var t=new FileReader;t.readAsText(e),t.onload=function(){P(t.result)}}}(e.target.files[0])}}),(0,r.jsx)("label",{htmlFor:"dec-private-key-file",children:(0,r.jsx)(Y.ZP,{title:(0,Z.F)("load_private_key"),placement:"left",children:(0,r.jsx)(U.Z,{"aria-label":(0,Z.F)("load_private_key"),component:"span",children:(0,r.jsx)(ee.Z,{})})})})]})}})]}),(0,r.jsx)("div",{className:e.actionsContainer,children:(0,r.jsxs)("div",{children:[(0,r.jsxs)(N.Z,{container:!0,spacing:1,children:[(0,r.jsx)(N.Z,{item:!0,children:(0,r.jsx)(W.Z,{disabled:0===n||Ae||Ee||Me,onClick:function(){i((function(e){return e-1})),Be(!1),X(!1),se(!1),ye(!1),We(!1),Re(!1),De(!1)},className:e.backButton,fullWidth:!0,children:(0,Z.F)("back")})}),(0,r.jsx)(N.Z,{item:!0,xs:!0,children:(0,r.jsx)(W.Z,{disabled:"secretKey"===_&&!g||"publicKey"===_&&(!F||!I)||Ae||Ee||Me,variant:"contained",onClick:tt,className:"".concat(e.nextButton," nextBtnHs"),startIcon:(Ae||Me)&&(0,r.jsx)(L.Z,{size:24,className:e.buttonProgress}),fullWidth:!0,children:Ae?(0,Z.F)("testing_password"):Ee?(0,Z.F)("testing_keys"):Me?(0,Z.F)("decrypting_file"):(0,Z.F)("next")})})]}),(0,r.jsx)("br",{}),"publicKey"===_&&de&&(0,r.jsx)(B.Z,{severity:"error",children:ge}),Me&&(0,r.jsx)(B.Z,{variant:"outlined",severity:"info",children:(0,Z.F)("page_close_alert_dec")})]})})]})]},2),(0,r.jsx)(R.Z,{children:(0,r.jsx)(O.Z,{StepIconProps:{classes:{root:e.stepIcon,active:e.activeStepIcon,completed:e.completedStepIcon}},children:(0,Z.F)("download_decrypted_file")})},3)]}),2===n&&(0,r.jsxs)(z.Z,{elevation:1,className:e.resetContainer,children:[(0,r.jsxs)(B.Z,{variant:"outlined",severity:"success",style:{border:"none"},children:[(0,r.jsx)(K.Z,{children:(0,Z.F)("success")}),(0,Z.F)("success_decrypted")]}),(0,r.jsxs)(N.Z,{container:!0,spacing:1,style:{marginTop:5},children:[(0,r.jsx)(N.Z,{item:!0,xs:12,children:(0,r.jsx)(W.Z,{onClick:function(){var e=Ne(u.name),t=new Blob(Yt),n=document.createElement("a");n.href=window.URL.createObjectURL(t),n.download=e,document.body.appendChild(n),n.click()},color:"primary",className:"".concat(e.nextButton," nextBtnHs"),variant:"contained",startIcon:(0,r.jsx)(ae.Z,{}),fullWidth:!0,style:{textTransform:"none"},children:(0,Z.F)("download_file")})}),(0,r.jsx)(N.Z,{item:!0,xs:12,children:(0,r.jsx)(W.Z,{onClick:function(){i(0),d(),v(),Be(!1),Fe(!1),Ie(!1),S(),P(),X(!1),se(!1),ye(!1),Ye(!1),Ht=null,Ut=null,$t=null,Vt=null,o.replace(o.pathname)},className:e.button,variant:"outlined",startIcon:(0,r.jsx)(ne.Z,{}),fullWidth:!0,style:{textTransform:"none"},children:(0,Z.F)("decrypt_another_file")})})]})]})]}))},en=function(){var e=(0,a.useState)(!0),t=e[0],n=e[1],i=(0,a.useState)(),o=i[0],s=i[1];return(0,a.useEffect)((function(){var e=/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor),t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);s(e?"safari":t?"mobile":"other")}),[]),(0,r.jsx)(ce.Z,{in:t,style:{marginTop:5},children:(0,r.jsx)(B.Z,{severity:"info",action:(0,r.jsx)(U.Z,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){n(!1)},children:(0,r.jsx)(le.Z,{fontSize:"inherit"})}),children:"safari"===o?(0,Z.F)("limited_safari"):"mobile"===o?(0,Z.F)("limited_mobile"):(0,Z.F)("limited_private")})})};function tn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){tn(e,t,n[t])}))}return e}function rn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var an=(0,nt.Z)({indicator:{display:"none"}})((function(e){return(0,r.jsx)(it.Z,nn({},e,{TabIndicatorProps:{children:(0,r.jsx)("span",{})}}))})),on=(0,nt.Z)((function(e){return{root:{textTransform:"none",padding:"8px",transition:"background-color 0.2s ease-out","&$selected":{backgroundColor:e.palette.white.main,boxShadow:"rgba(149, 157, 165, 0.2) 0px 8px 24px",borderRadius:"8px"}},selected:{}}}))((function(e){return(0,r.jsx)(ot.Z,nn({disableRipple:!0},e))})),sn=(0,i.Z)((function(e){return{root:{maxWidth:"768px"},bar:{marginTop:15,backgroundColor:e.palette.gallery.main,borderRadius:"8px",padding:8},TabPanel:{marginTop:15},tab:{color:e.palette.emperor.main}}}));function cn(e){var t=e.children,n=e.value,a=e.index,i=rn(e,["children","value","index"]);return(0,r.jsx)("div",nn({role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},i,{children:t}))}function ln(){var e=sn(),t=(0,c.useRouter)(),n=t.query,i=(0,a.useState)(0),o=i[0],s=i[1],l={tab:0,label:(0,Z.F)("encryption")},u={tab:1,label:(0,Z.F)("decryption")};return(0,a.useEffect)((function(){n.tab&&"encryption"===n.tab&&s(l.tab),n.tab&&"decryption"===n.tab&&s(u.tab)}),[u.tab,l.tab,n.tab]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(at.Z,{className:e.root,children:[(0,r.jsx)(en,{}),(0,r.jsx)(rt.Z,{position:"static",className:e.bar,elevation:0,children:(0,r.jsxs)(an,{value:o,onChange:function(e,n){s(n),t.replace(t.pathname)},variant:"fullWidth",centered:!0,children:[(0,r.jsx)(on,{label:l.label,className:e.tab}),(0,r.jsx)(on,{label:u.label,className:e.tab})]})}),(0,r.jsx)(cn,{value:o,index:l.tab,className:e.TabPanel,children:(0,r.jsx)(Et,{})}),(0,r.jsx)(cn,{value:o,index:u.tab,className:e.TabPanel,children:(0,r.jsx)(Qt,{})})]})})}cn.propTypes={children:u().node,index:u().any.isRequired,value:u().any.isRequired};var un=(0,i.Z)((function(e){return{body:{backgroundColor:e.palette.alabaster.main,minHeight:"100vh",display:"flex",flexDirection:"column"}}})),dn=function(){var e=un();return(0,r.jsxs)("div",{className:e.body,children:[(0,r.jsx)(o.Z,{}),(0,r.jsx)(s.Z,{}),(0,r.jsx)(ln,{}),(0,r.jsx)(xt.Z,{})]})},pn=n(3457),fn=n(8413),hn=(0,i.Z)((function(e){return{backDrop:{backgroundColor:e.palette.alabaster.main,opacity:"96%",zIndex:10,color:e.palette.mineShaft.main},loadingWrapper:{display:"flex",justifyContent:"center",alignItems:"center"},circle:{position:"absolute",width:250,height:250,border:"4px dashed",borderRadius:"50%",animation:"$spin 5s linear infinite"},loadingImg:{position:"absolute",width:150,animation:"$bounce 1.5s linear infinite"},loadingText:{position:"absolute",bottom:"15%"},"@keyframes spin":{"100%":{transform:"rotateZ(360deg)"}},"@keyframes bounce":{"0%":{transform:"translateY(0)"},"50%":{transform:"translateY(-10px)"},"100%":{transform:"translateY(0)"}}}})),xn=function(e){var t=hn();return(0,r.jsx)(q.Z,{className:t.backDrop,open:e.open,children:(0,r.jsxs)("div",{className:t.loadingWrapper,children:[(0,r.jsx)("div",{className:t.circle}),(0,r.jsx)("img",{className:t.loadingImg,src:"/assets/images/logo.png",alt:"Loading..."}),(0,r.jsx)("samp",{className:t.loadingText,children:"Loading..."})]})})},mn=function(){var e=(0,a.useState)(),t=e[0],n=e[1],i=(0,a.useState)(),o=i[0],s=i[1],c=(0,a.useState)(!0),l=c[0],u=c[1];return(0,a.useEffect)((function(){var e=/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor),t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);s(!e&&!t),"serviceWorker"in navigator?navigator.serviceWorker.register("service-worker.js").then((function(e){e.update(),n(!0),u(!1)})).catch((function(e){console.log("ServiceWorker registration failed",e),n(!1),u(!1)})):(n(!1),u(!1))}),[]),(0,r.jsxs)(pn.Z,{theme:fn.Q2,children:[(0,r.jsx)(xn,{open:l}),!l&&(t&&o?(0,r.jsx)(kt,{}):(0,r.jsx)(dn,{}))]})}}},function(e){e.O(0,[78,714,130,808,540,973,773,774,888,179],(function(){return t=8581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);